<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4A90E2;
            --background-color: #F4F7F6;
            --card-background: #FFFFFF;
            --text-color: #333333;
            --accent-color: #F5A623;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Login View Styles */
        .login-view {
            display: flex;
            min-height: 100vh;
        }

        .login-view.hidden {
            display: none;
        }

        /* Left Panel - Branding */
        .branding-panel {
            flex: 1;
            background: linear-gradient(135deg, #fff9c4, #ffc1cc, #d4a5ff, #a8e6cf);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            text-align: center;
        }

        .logo-container {
            margin-bottom: 2rem;
        }

        .logo-icon {
            font-size: 6rem;
            color: white;
            margin-bottom: 1rem;
            text-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .brand-title {
            font-size: 3rem;
            font-weight: 300;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* Right Panel - Form */
        .form-panel {
            flex: 1;
            background: var(--card-background);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .login-form-container {
            width: 100%;
            max-width: 400px;
        }

        .login-form h1 {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 2rem;
            color: var(--text-color);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color);
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.1);
        }

        .password-container {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            font-size: 1rem;
        }

        .password-toggle:hover {
            color: var(--primary-color);
        }

        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
        }

        .sign-in-btn {
            width: 100%;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 14px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-bottom: 1rem;
        }

        .sign-in-btn:hover {
            background: #3a7bc8;
        }

        .form-links {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
        }

        .form-links a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .form-links a:hover {
            text-decoration: underline;
        }

        .signup-link {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        /* Dashboard View Styles */
        .dashboard-view {
            display: none;
            min-height: 100vh;
              flex-direction: column;
        }

        .dashboard-view.active {
            display: flex;
        }

        /* Header Styles */
        .main-header {
            background-color: var(--card-background);
            padding: 15px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        @media (min-width: 768px) {
            .main-header {
                padding: 20px 40px;
            }
        }

        .nav-toggle-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-color);
            padding: 5px;
            border-radius: 6px;
        }

        .nav-toggle-btn:focus-visible {
            outline: 2px solid var(--primary-color);
        }

        .header-user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logout-btn {
            background: none;
            border: none;
            color: #666;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
            transition: color 0.2s, background-color 0.2s;
        }

        .logout-btn:hover {
            color: var(--text-color);
            background-color: #f0f0f0;
        }

        .logout-btn:focus-visible {
            outline: 2px solid var(--primary-color);
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
        }
        
        .profile-dropdown {
            position: relative;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 180px;
            z-index: 100;
            margin-top: 8px;
            display: none;
        }
        
        .dropdown-menu.show {
            display: block;
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            color: #333;
            text-decoration: none;
            transition: background-color 0.2s;
        }
        
        .dropdown-item:hover {
            background-color: #f5f5f5;
        }

        .dashboard-container {
            display: flex;
            flex: 1;
        }

        /* Left Sidebar */
        .sidebar {
            width: 280px;
            background: var(--card-background);
            border-right: 1px solid #e0e0e0;
            padding: 2rem 0;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: 80px;
                left: 0;
                height: calc(100vh - 80px);
                z-index: 999;
                transform: translateX(-100%);
            }

            .sidebar.expanded {
                transform: translateX(0);
            }
        }

        .sidebar-header {
            padding: 0 2rem 2rem;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 2rem;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .sidebar-logo i {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .nav-menu {
            flex: 1;
            padding: 0 1rem;
        }

        .nav-item {
            display: block;
            width: 100%;
            padding: 12px 1rem;
            margin-bottom: 0.5rem;
            background: none;
            border: none;
            text-align: left;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .nav-item:hover {
            background: rgba(74, 144, 226, 0.1);
            color: var(--primary-color);
        }

        .nav-item.active {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        .nav-item i {
            width: 20px;
            margin-right: 0.5rem;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            padding: 2rem;
            background: var(--background-color);
            overflow-y: auto;
            transition: margin-left 0.3s ease;
        }

        @media (min-width: 769px) {
            .sidebar.collapsed + .main-content {
                margin-left: -280px;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
            }
        }

        .content-view {
            display: none;
            background: var(--card-background);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .content-view.active {
            display: block;
        }

        .content-view h2 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .content-view p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #666;
        }

        /* Learning Modules Styles */
        .modules-container { max-width: 1200px; margin: 0 auto; }
        .modules-header { text-align: center; margin-bottom: 40px; }
        .modules-header h1 { font-size: 2rem; font-weight: 800; color: var(--primary-color); margin-bottom: 10px; }
        .modules-header p { font-size: 1.1rem; color: #666; }
        .modules-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        .module-card {
            background-color: var(--card-background); border: 1px solid var(--border-color); border-radius: 12px;
            padding: 25px; text-align: center; cursor: pointer; transition: all 0.3s;
        }
        .module-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); border-color: var(--primary-color); }
        .module-card .icon { font-size: 3rem; color: var(--primary-color); margin-bottom: 15px; }
        .module-card h3 { font-size: 1.3rem; color: var(--text-color); margin-bottom: 10px; }
        .module-card p { font-size: 0.95rem; color: #666; margin-bottom: 15px; line-height: 1.5; }
        .module-card .duration { font-size: 0.85rem; color: #888; font-weight: 600; }
        .module-detail { background-color: var(--card-background); border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.07); padding: 30px; }
        .module-detail h2 { font-size: 1.8rem; color: var(--primary-color); margin-bottom: 20px; }
        .module-detail .description { font-size: 1.1rem; line-height: 1.6; margin-bottom: 25px; color: #555; }
        .module-detail .objectives { margin-bottom: 25px; }
        .module-detail .objectives h3 { font-size: 1.2rem; margin-bottom: 15px; color: var(--text-color); }
        .module-detail .objectives ul { list-style: none; padding-left: 0; }
        .module-detail .objectives li { background-color: var(--light-primary-bg); padding: 10px 15px; border-radius: 8px; margin-bottom: 8px; }
        .module-actions { display: flex; gap: 15px; justify-content: center; margin-top: 30px; }
        .btn-primary { background-color: var(--primary-color); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: background-color 0.3s; }
        .btn-primary:hover { background-color: #3a7bc8; }
        .btn-secondary { background: none; border: 1px solid var(--border-color); color: var(--text-color); padding: 12px 24px; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-secondary:hover { border-color: var(--primary-color); color: var(--primary-color); }
        .quiz-container { background-color: var(--light-primary-bg); border-radius: 12px; padding: 25px; margin-top: 20px; }
        .quiz-container h3 { color: var(--primary-color); margin-bottom: 15px; }
        .quiz-question { margin-bottom: 20px; }

        /* AI Chatbot Styles */
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
        }

        .chat-header h1 {
            margin-bottom: 5px;
        }

        .chat-header p {
            margin-bottom: 0;
            flex-grow: 1; /* Allow paragraph to take available space */
        }

        .new-chat-btn {
            margin-left: 20px; /* Add some space from the text */
            flex-shrink: 0; /* Prevent button from shrinking */
        }

        @media (max-width: 768px) {
            .chat-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .new-chat-btn {
                margin-left: 0;
                margin-top: 10px; /* Add space above button on small screens */
            }
        }
        .quiz-question p { font-weight: 600; margin-bottom: 10px; }
        .quiz-options { display: flex; flex-direction: column; gap: 8px; }
        .quiz-option { padding: 10px 15px; border: 1px solid var(--border-color); border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .quiz-option:hover { border-color: var(--primary-color); background-color: rgba(74, 144, 226, 0.1); }
        .quiz-option.selected { border-color: var(--primary-color); background-color: rgba(74, 144, 226, 0.2); }
        .completion-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background-color: var(--card-background); border-radius: 12px; padding: 40px; text-align: center; max-width: 500px; width: 90%; }
        .modal-content .icon { font-size: 4rem; color: var(--success-color); margin-bottom: 20px; }
        .modal-content h2 { color: var(--primary-color); margin-bottom: 15px; }
        .modal-content p { margin-bottom: 25px; color: #666; }
        .hidden { display: none !important; }

        /* Self-Assessment Styles */
        .assessment-container { max-width: 800px; margin: 0 auto; }
        .card { background-color: var(--card-background); border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.07); padding: 40px; text-align: center; }
        .start-view .icon { font-size: 4rem; color: var(--primary-color); margin-bottom: 20px; }
        .start-view h1 { font-size: 1.8rem; font-weight: 800; color: var(--primary-color); margin-bottom: 15px; }
        .start-view p { margin-bottom: 30px; }
        .progress-bar { width: 100%; margin-bottom: 10px; }
        .progress-bar progress { width: 100%; height: 8px; accent-color: var(--primary-color); }
        .progress-text { text-align: right; font-size: 0.9rem; font-weight: 600; color: #777; margin-bottom: 30px; }
        .question-fieldset { border: none; padding: 0; }
.question-fieldset legend { font-size: 1.4rem; font-weight: 700; margin-bottom: 25px; text-align: left; }
.question-fieldset .radio-option { text-align: left; display: flex; align-items: center; margin-bottom: 10px; }
.question-fieldset .radio-option input[type="radio"] { margin-right: 10px; }
        .answer-options { display: flex; flex-direction: column; gap: 15px; }
        .answer-label {
            display: block; padding: 15px; border: 1px solid var(--border-color);
            border-radius: 8px; cursor: pointer; transition: all 0.2s;
        }
        .answer-label:hover { border-color: var(--primary-color); }
        .answer-label input[type="radio"] { display: none; }
        .answer-label input[type="radio"]:checked + span { font-weight: 700; }
        .answer-label input[type="radio"]:checked + span::before { content: 'âœ” '; color: var(--success-color); }
        .assessment-nav { margin-top: 30px; display: flex; justify-content: space-between; }
.assessment-nav button { margin-left: 20px; }
.assessment-nav button:first-child { margin-left: 0; }
        .results-header { text-align: center; margin-bottom: 30px; padding: 20px; border-radius: 8px; }
        .results-header.low { background-color: var(--success-bg); border-left: 5px solid var(--success-color); }
        .results-header.moderate { background-color: var(--status-pending-bg); border-left: 5px solid var(--warning-color); }
        .results-header.high { background-color: var(--error-bg); border-left: 5px solid var(--error-color); }
        .results-header h2 { font-size: 1.5rem; }
        .results-section h3 { font-size: 1.2rem; font-weight: 700; border-bottom: 2px solid var(--primary-color); padding-bottom: 5px; margin-bottom: 15px; margin-top: 30px; }
        .results-section ul { list-style: none; padding-left: 0; }
        .results-section ul li { background-color: var(--light-primary-bg); padding: 10px 15px; border-radius: 8px; margin-bottom: 10px; }
        .results-actions { text-align: center; margin-top: 40px; display: flex; justify-content: center; gap: 15px; }

        /* AI Chat Styles */
        .chat-container { max-width: 900px; margin: 0 auto; }
        .chat-header { text-align: center; margin-bottom: 30px; }
        .chat-header h1 { font-size: 1.8rem; font-weight: 700; margin-bottom: 4px; }
        .chat-header p { font-size: 1.1rem; color: #666; margin-bottom: 20px; }
        .chat-card {
            background-color: var(--card-background); border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.07);
            display: flex; flex-direction: column; height: 70vh; min-height: 500px;
        }
        .chat-window {
            flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px;
        }
        .chat-message { max-width: 75%; padding: 10px 15px; border-radius: 18px; line-height: 1.5; }
        .bot-message {
            background-color: var(--peer-message-bg); color: var(--text-color);
            border-bottom-left-radius: 4px; align-self: flex-start;
        }
        .user-message {
            background-color: var(--primary-color); color: var(--card-background);
            border-bottom-right-radius: 4px; align-self: flex-end;
        }
        .chat-input-form { display: flex; gap: 10px; padding: 20px; border-top: 1px solid var(--border-color); }
        #userInput {
            flex-grow: 1; padding: 12px 15px; border-radius: 8px; border: 1px solid var(--border-color);
            font-family: 'Nunito', sans-serif; font-size: 1rem;
        }
        #userInput:focus {
            outline: none; border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
        }
        .send-btn {
            background-color: var(--primary-color); color: var(--card-background); border: none;
            border-radius: 8px; padding: 0 20px; font-size: 1rem; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; gap: 8px; transition: background-color 0.3s;
        }
        .send-btn:hover { background-color: #3a7bc8; }
        .send-btn:focus { outline: none; box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.4); }
        .new-chat-btn {
            background: none; border: 1px solid var(--primary-color); color: var(--primary-color);
            padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; margin-top: 20px;
            float: right; transition: background-color 0.3s, color 0.3s;
        }
        .new-chat-btn:hover { background-color: var(--primary-color); color: var(--card-background); }
        .error-message {
            padding: 30px; background-color: #fff0f0; border: 1px solid #ffcccc;
            border-radius: 8px; text-align: center;
        }

        /* Peer Support Styles */
        .peer-container { max-width: 1000px; margin: 0 auto; }
        .peer-header { text-align: center; margin-bottom: 30px; }
        .peer-header h1 { font-size: 1.8rem; font-weight: 700; margin-bottom: 4px; }
        .peer-header p { font-size: 1.1rem; color: #666; margin-bottom: 20px; }
        .topics-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .topic-card {
            background-color: var(--card-background); border-radius: 12px; padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.07); cursor: pointer; transition: transform 0.3s, box-shadow 0.3s;
        }
        .topic-card:hover { transform: translateY(-2px); box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1); }
        .topic-title { font-size: 1.2rem; font-weight: 600; margin-bottom: 8px; color: var(--primary-color); }
        .topic-description { color: #666; margin-bottom: 15px; line-height: 1.5; }
        .topic-stats { display: flex; justify-content: space-between; font-size: 0.9rem; color: #888; }
        .discussion-view { display: none; }
        .discussion-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .back-btn {
            background: none; border: 1px solid var(--primary-color); color: var(--primary-color);
            padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600;
            transition: background-color 0.3s, color 0.3s;
        }
        .back-btn:hover { background-color: var(--primary-color); color: var(--card-background); }
        .discussion-thread { background-color: var(--card-background); border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .post { border-bottom: 1px solid var(--border-color); padding: 20px 0; }
        .post:last-child { border-bottom: none; }
        .post-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .post-author { font-weight: 600; color: var(--primary-color); }
        .post-time { font-size: 0.9rem; color: #888; }
        .post-content { line-height: 1.6; margin-bottom: 10px; }
        .post-actions { display: flex; gap: 15px; }
        .post-action {
            background: none; border: none; color: #888; cursor: pointer;
            font-size: 0.9rem; display: flex; align-items: center; gap: 5px;
        }
        .post-action:hover { color: var(--primary-color); }
        .reply-form { margin-top: 20px; }
        .reply-textarea {
            width: 100%; min-height: 100px; padding: 15px; border: 1px solid var(--border-color);
            border-radius: 8px; font-family: 'Nunito', sans-serif; resize: vertical;
        }
        .reply-textarea:focus {
            outline: none; border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
        }
        .reply-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px; }
        .submit-btn {
            background-color: var(--primary-color); color: var(--card-background); border: none;
            padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;
        }
        .submit-btn:hover { background-color: #3a7bc8; }
        .cancel-btn {
            background: none; border: 1px solid #ccc; color: #666;
            padding: 10px 20px; border-radius: 8px; cursor: pointer;
        }
        .cancel-btn:hover { background-color: #f5f5f5; }
        .maintenance-message {
            text-align: center; padding: 40px; background-color: #fff9e6;
            border: 1px solid #ffd700; border-radius: 8px;
        }

        /* Feedback Styles */
        .feedback-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .feedback-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .feedback-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .feedback-header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .feedback-form {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .form-fieldset {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-fieldset legend {
            color: #2c3e50;
            font-weight: 600;
            padding: 0 10px;
        }

        .feedback-type-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-option input[type="radio"] {
            margin: 0;
        }

        .radio-option label {
            color: #34495e;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.2s;
        }

        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 25px;
        }

        .checkbox-group input[type="checkbox"] {
            margin: 0;
        }

        .checkbox-group label {
            color: #34495e;
            cursor: pointer;
        }

        .btn-submit {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-submit:hover {
            background: #229954;
        }

        .form-messages {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            font-weight: 500;
        }

        .form-messages.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .form-messages.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Mood & Goal Tracking Styles */
        .mood-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .mood-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .mood-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .mood-header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .mood-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .mood-section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .mood-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .mood-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .mood-option {
            cursor: pointer;
        }

        .mood-option input[type="radio"] {
            display: none;
        }

        .mood-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: all 0.2s;
            min-width: 80px;
        }

        .mood-option input[type="radio"]:checked + .mood-card {
            border-color: #3498db;
            background: #f0f8ff;
        }

        .mood-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }

        .mood-card .emoji {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .mood-card .label {
            font-size: 0.9em;
            color: #2c3e50;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input[type="text"],
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            width: 100%;
        }

        .btn:hover {
            background: #2980b9;
        }

        .history-section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .history-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        #message-area {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 6px;
            font-weight: 500;
        }

        #message-area.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        #mood-history-list {
            list-style: none;
            padding: 0;
        }

        .history-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }

        .history-item.history-great {
            border-left-color: #27ae60;
        }

        .history-item.history-good {
            border-left-color: #2ecc71;
        }

        .history-item.history-okay {
            border-left-color: #f39c12;
        }

        .history-item.history-down {
            border-left-color: #e67e22;
        }

        .history-item.history-bad {
            border-left-color: #e74c3c;
        }

        .history-item .details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .mood-display {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .mood-display .emoji {
            font-size: 1.2em;
        }

        .date {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .note {
            color: #34495e;
            font-style: italic;
            margin-top: 5px;
        }

        /* Profile Styles */
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .page-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .page-header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .profile-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .profile-summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            border: 3px solid rgba(255,255,255,0.3);
        }

        .user-info h2 {
            margin: 0 0 5px 0;
            font-size: 1.5em;
        }

        .user-info p {
            margin: 2px 0;
            opacity: 0.9;
        }

        .profile-card form {
            padding: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group-full {
            grid-column: 1 / -1;
        }

        .form-group {
            margin-bottom: 0;
        }

        .form-group label {
            display: block;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn-save {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-save:hover {
            background: #229954;
        }

        #form-message {
            margin-top: 15px;
            padding: 12px;
            border-radius: 6px;
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            font-weight: 500;
        }

        /* Counseling Styles */
        .booking-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .booking-form-card {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }
        
        .booking-form-card h1 { font-size: 1.8rem; font-weight: 700; margin-bottom: 4px; }
        .booking-form-card .subtitle { font-size: 1.1rem; color: #666; margin-bottom: 30px; }
        
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color);
            font-family: 'Nunito', sans-serif; font-size: 1rem;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
        }
        .form-group textarea { min-height: 100px; resize: vertical; }

        .date-time-grid { display: grid; gap: 25px; grid-template-columns: 1fr; }
        @media (min-width: 768px) { .date-time-grid { grid-template-columns: 1fr 2fr; } }

        .time-slots-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; }
        
        .time-slot-btn {
            background-color: #f0f0f0; border: 1px solid var(--border-color); border-radius: 8px;
            padding: 10px; cursor: pointer; font-family: 'Nunito', sans-serif;
            font-weight: 600; transition: all 0.2s;
        }
        .time-slot-btn:hover:not(:disabled) { background-color: #e0e0e0; border-color: #ccc; }
        .time-slot-btn.selected { background-color: var(--primary-color); color: var(--card-background); border-color: var(--primary-color); }
        .time-slot-btn:disabled { background-color: #f5f5f5; color: #b0b0b0; cursor: not-allowed; text-decoration: line-through; }
        
        .btn-submit {
            background-color: var(--primary-color); color: var(--card-background); border: none;
            padding: 12px 20px; border-radius: 8px; font-size: 1rem; font-weight: 700;
            cursor: pointer; display: inline-flex; align-items: center; gap: 8px;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        
        #bookings-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .booking-item-card {
            background-color: var(--card-background);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .booking-item-details h3 { font-size: 1.1rem; }
        .booking-item-details p { color: #555; }
        
        .status-badge {
            padding: 4px 12px; border-radius: 16px; font-size: 0.8rem;
            font-weight: 600; display: inline-flex; align-items: center; gap: 5px;
        }
        .status-pending { background-color: #fff8e1; color: #f57c00; }
        .status-approved { background-color: #e8f5e9; color: #2e7d32; }
        
        .btn-cancel {
            background-color: var(--danger-color); color: var(--card-background); border: none;
            padding: 8px 15px; border-radius: 8px; font-weight: 600;
            cursor: pointer; display: inline-flex; align-items: center; gap: 5px; transition: background-color 0.2s;
        }
        .btn-cancel:hover { background-color: #c82333; }

        /* Progress Tracking Styles */
        .progress-dashboard { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .progress-dashboard h1 { font-size: 2rem; font-weight: 800; margin-bottom: 10px; color: #2c3e50; }
        .progress-dashboard .subtitle { font-size: 1.1rem; color: #7f8c8d; margin-bottom: 30px; }
        
        .kpi-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .kpi-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); display: flex; align-items: center; gap: 20px; transition: transform 0.2s, box-shadow 0.2s; }
        .kpi-card:hover { transform: translateY(-5px); box-shadow: 0 6px 20px rgba(0,0,0,0.12); }
        
        .kpi-icon { font-size: 2.2rem; color: var(--primary-color); background: rgba(74, 144, 226, 0.1); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .kpi-data h3 { font-size: 1rem; color: #7f8c8d; margin-bottom: 5px; font-weight: 600; }
        .kpi-value { font-size: 2rem; font-weight: 800; color: #2c3e50; margin: 0; line-height: 1; }
        .kpi-value span { font-size: 1rem; font-weight: 600; color: #7f8c8d; }
        .kpi-trend { font-size: 0.9rem; margin-top: 5px; display: flex; align-items: center; gap: 5px; }
        .kpi-trend.positive { color: var(--success-color); }
        .kpi-trend.negative { color: var(--danger-color); }
        
        .progress-sections { display: grid; grid-template-columns: 1fr; gap: 25px; margin-bottom: 30px; }
        @media(min-width: 992px) { .progress-sections { grid-template-columns: 1fr 1fr; } }
        
        .progress-section { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .progress-section.full-width { grid-column: 1 / -1; }
        .progress-section h2 { font-size: 1.4rem; font-weight: 700; margin-bottom: 20px; color: #2c3e50; }
        
        .chart-container { margin: 20px 0; }
        .static-chart { position: relative; height: 250px; padding: 20px 0 30px 40px; }
        .chart-y-axis { position: absolute; left: 0; top: 0; bottom: 30px; display: flex; flex-direction: column-reverse; justify-content: space-between; }
        .chart-y-axis span { font-size: 0.8rem; color: #7f8c8d; transform: translateX(-50%); }
        
        .chart-bars { display: flex; justify-content: space-around; height: 100%; padding-bottom: 30px; }
        .chart-bar { position: relative; width: 30px; background: linear-gradient(to top, #4A90E2, #74b9ff); border-radius: 4px 4px 0 0; margin: 0 10px; }
        .chart-bar span { position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); font-size: 0.8rem; color: #7f8c8d; }
        
        .chart-caption { text-align: center; font-size: 0.9rem; color: #7f8c8d; margin-top: 10px; }
        
        .goals-list { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
        .goal-item { background: #f8f9fa; border-radius: 10px; padding: 15px; display: flex; align-items: flex-start; gap: 15px; transition: transform 0.2s; }
        .goal-item:hover { transform: translateX(5px); }
        
        .goal-checkbox { margin-top: 3px; }
        .goal-checkbox input[type="checkbox"] { display: none; }
        .goal-checkbox label { display: block; width: 22px; height: 22px; border: 2px solid #ddd; border-radius: 50%; cursor: pointer; position: relative; }
        .goal-checkbox input[type="checkbox"]:checked + label:after { content: '\2713'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--primary-color); font-weight: bold; }
        
        .goal-details { flex-grow: 1; }
        .goal-details h3 { font-size: 1.1rem; font-weight: 700; margin: 0 0 5px 0; color: #2c3e50; }
        .goal-details p { font-size: 0.9rem; color: #7f8c8d; margin: 0 0 10px 0; }
        
        .goal-meta { display: flex; gap: 15px; font-size: 0.8rem; color: #95a5a6; }
        .goal-date, .goal-streak { display: flex; align-items: center; gap: 5px; }
        
        .assessment-progress-container { display: flex; flex-direction: column; gap: 25px; }
        .assessment-progress-item { background: #f8f9fa; border-radius: 10px; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        
        .assessment-info { flex-grow: 1; }
        .assessment-info h3 { font-size: 1.1rem; font-weight: 700; margin: 0 0 15px 0; color: #2c3e50; }
        
        .progress-bar-container { height: 10px; background: #e0e0e0; border-radius: 5px; margin-bottom: 10px; overflow: hidden; }
        .progress-bar { height: 100%; background: linear-gradient(to right, #4A90E2, #74b9ff); border-radius: 5px; }
        
        .progress-labels { display: flex; justify-content: space-between; font-size: 0.8rem; color: #7f8c8d; }
        
        .assessment-trend { margin-left: 20px; text-align: right; }
        .trend-label { font-size: 0.8rem; color: #7f8c8d; display: block; margin-bottom: 5px; }
        .trend-value { font-size: 0.9rem; font-weight: 600; display: flex; align-items: center; gap: 5px; }
        .trend-value.positive { color: var(--success-color); }
        .trend-value.negative { color: var(--danger-color); }
        
        .btn-take-assessment { background-color: var(--primary-color); color: white; border: none; padding: 12px 20px; border-radius: 8px; font-size: 1rem; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 8px; margin: 20px auto 0; }
        .btn-take-assessment:hover { background-color: #3a7bc8; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: white; border-radius: 12px; padding: 30px; width: 90%; max-width: 500px; position: relative; }
        .close-modal { position: absolute; top: 15px; right: 15px; font-size: 1.5rem; cursor: pointer; }
        
        .form-actions { display: flex; justify-content: flex-end; gap: 15px; margin-top: 20px; }
        .btn-cancel-modal { background: #e0e0e0; color: #333; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
        .btn-save { background: var(--success-color); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }

        /* Results & Suggestions Styles */
        .result-display { text-align: center; padding: 20px; border-radius: 8px; border-left: 5px solid; }
        .result-display.low { background-color: #e8f5e9; border-color: var(--success-color); }
        .result-display.moderate { background-color: #fff8e1; border-color: var(--warning-color); }
        .result-display.high { background-color: #ffebf0; border-color: var(--danger-color); }
        .result-display .score { font-size: 3rem; font-weight: 800; }
        .result-display .level { font-size: 1.3rem; font-weight: 700; }
        .interpretation { margin-top: 20px; line-height: 1.7; }
        
        .filter-buttons { display: flex; gap: 10px; margin-bottom: 20px; }
        
        #suggestions-list { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 15px; }
        .suggestion-item { display: flex; align-items: center; gap: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px; }
        .suggestion-item .icon { font-size: 1.5rem; color: var(--primary-color); width: 30px; text-align: center; }
        .suggestion-item .text { flex-grow: 1; }
        .bookmark-btn { background: none; border: none; font-size: 1.2rem; color: #bbb; cursor: pointer; padding: 5px; }
        .bookmark-btn.bookmarked { color: var(--warning-color); }

        .error-card { text-align: center; }
        .error-card .icon { font-size: 3rem; color: var(--danger-color); margin-bottom: 15px; }
        
        .filter-btn {
            background-color: #f0f0f0;
            color: var(--text-color);
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 8px 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .filter-btn:hover {
            background-color: #dcdcdc;
            border-color: #ccc;
        }
        .filter-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Badges Styles */
        .badges-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .badges-section {
            background: var(--card-background);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .badges-section h2 {
            margin-bottom: 20px;
            font-size: 1.4rem;
            color: var(--text-color);
            border-bottom: 2px solid var(--background-color);
            padding-bottom: 10px;
        }
        
        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
        }
        
        .badge-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        .badge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .badge-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            background: rgba(74, 144, 226, 0.1);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .badge-card.locked .badge-icon {
            color: #aaa;
            background: rgba(0,0,0,0.05);
        }
        
        .badge-card.locked::after {
            content: '\f023';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 10px;
            right: 10px;
            color: #aaa;
            font-size: 1.2rem;
        }
        
        .badge-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .badge-description {
            font-size: 0.85rem;
            color: #666;
        }
        
        .badge-date {
            font-size: 0.8rem;
            color: #888;
            margin-top: 10px;
        }
        
        .badge-card.locked .badge-name,
        .badge-card.locked .badge-description {
            color: #aaa;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .login-view {
                flex-direction: column;
            }

            .branding-panel {
                min-height: 40vh;
            }

            .brand-title {
                font-size: 2rem;
            }

            .dashboard-container {
                flex-direction: column;
            }

            .nav-menu {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }

            .nav-item {
                text-align: left;
                margin-bottom: 0;
            }
            
            .badges-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
        }

        /* Accessibility */
        .nav-item:focus,
        .form-input:focus,
        .form-select:focus,
        .sign-in-btn:focus,
        .logout-btn:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Screen reader only */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Counselling Styles */
        .dashboard-grid {
            display: grid;
            gap: 30px;
            grid-template-columns: 1fr;
        }
        @media (min-width: 992px) {
            .dashboard-grid { grid-template-columns: 1.5fr 1fr; }
        }
        
        .widget-card { 
            background: var(--card-background); 
            border-radius: 12px; 
            padding: 30px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.05); 
        }
        .widget-card h2 { 
            font-size: 1.4rem; 
            font-weight: 700; 
            margin-bottom: 20px; 
        }
        
        #requests-list { 
            list-style: none; 
            padding: 0; 
            display: flex; 
            flex-direction: column; 
            gap: 20px; 
        }
        .request-card { 
            background-color: #f8f9fa; 
            padding: 20px; 
            border-radius: 8px; 
            border-left: 5px solid var(--primary-color); 
        }
        .request-card.pending { 
            border-color: var(--warning-color); 
        }
        .request-card.approved { 
            border-color: var(--success-color); 
        }
        .request-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: flex-start; 
        }
        .request-header h3 { 
            font-size: 1.2rem; 
            margin: 0; 
        }
        .request-header .date-time { 
            color: #555; 
            font-weight: 600; 
        }
        .request-notes { 
            margin: 15px 0; 
            font-style: italic; 
            color: #666; 
        }
        .request-actions { 
            display: flex; 
            gap: 10px; 
        }
        
        /* Availability Section */
        .availability-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); 
            gap: 10px; 
        }
        .availability-slot { 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            background-color: #f8f9fa; 
            padding: 10px; 
            border-radius: 6px; 
        }
        
        /* Report Styles */
        .kpi-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); 
            gap: 20px; 
            margin-bottom: 40px; 
        }
        .reports-container { 
            background: var(--card-background); 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        .reports-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            flex-wrap: wrap; 
            gap: 20px; 
            margin-bottom: 20px; 
        }
        .filter-controls { 
            display: flex; 
            gap: 15px; 
            flex-wrap: wrap; 
            align-items: center; 
        }
        .filter-group { 
            display: flex; 
            flex-direction: column; 
        }
        .filter-group label { 
            font-size: 0.85rem; 
            font-weight: 600; 
            margin-bottom: 5px; 
        }
        .filter-group input, .filter-group select {
            padding: 8px 10px; 
            border: 1px solid var(--border-color); 
            border-radius: 6px;
            font-family: inherit; 
            font-size: 0.9rem;
        }
        .btn-secondary { 
            background: #f0f0f0; 
            color: var(--text-color); 
        }
        .table-container { 
            overflow-x: auto; 
        }
        .data-table { 
            width: 100%; 
            border-collapse: collapse; 
        }
        .data-table th, .data-table td { 
            padding: 12px 15px; 
            text-align: left; 
            border-bottom: 1px solid var(--border-color); 
            vertical-align: top;
        }
        .data-table thead th { 
            background-color: #f8f9fa; 
            font-weight: 700; 
        }
        .data-table tbody tr:hover { 
            background-color: #f1f8fe; 
        }
        .details-list { 
            list-style: none; 
            padding: 0; 
            margin: 0; 
            font-size: 0.9rem; 
        }
        .details-list li { 
            margin-bottom: 2px; 
        }
        .details-list strong { 
            color: #555; 
        }
        .hidden { 
            display: none !important; 
        }
        #no-records-message { 
            text-align: center; 
            padding: 40px; 
            font-size: 1.1rem; 
            color: #777; 
        }
    </style>
</head>
<body>
    <!-- Login View -->
    <div id="login-view" class="login-view">
        <div class="branding-panel">
            <div class="logo-container">
                <img src="logo pic.png" alt="Mental Health Hub Logo" class="logo-icon" style="width: 6rem; height: 6rem; object-fit: contain;">
                <h1 class="brand-title">Mental Health Hub</h1>
            </div>
        </div>

        <div class="form-panel">
            <div class="login-form-container">
                <form id="login-form" class="login-form">
                    <h1>Sign in</h1>
                    <div class="form-group"><label for="email">Email or Username</label><input type="text" id="email" name="email" class="form-input" required></div>
                    <div class="form-group"><label for="password">Password</label><div class="password-container"><input type="password" id="password" name="password" class="form-input" required><button type="button" class="password-toggle" id="password-toggle" aria-label="Show password"><i class="fa-solid fa-eye" aria-hidden="true"></i></button></div></div>
                    <div class="form-group"><label for="role">Role</label><select id="role" name="role" class="form-select" required><option value="">Select your role</option><option value="student">Student</option><option value="faculty">Faculty Member</option><option value="professional">Professional</option></select></div>
                    <div class="checkbox-container"><input type="checkbox" id="remember" name="remember"><label for="remember">Remember me</label></div>
                    <button type="submit" class="sign-in-btn">Sign In</button>
                    <div class="form-links"><a href="#">Forgot password?</a></div>
                    <div class="signup-link">Don't have an account? <a href="#">Sign up</a></div>
                </form>
            </div>
        </div>
    </div>

    <!-- Dashboard View -->
    <div id="dashboard-view" class="dashboard-view">
        <!-- Header Component -->
        <header class="main-header">
            <!-- Left Side: Navigation Toggle -->
            <button class="nav-toggle-btn" id="nav-toggle" aria-label="Toggle navigation">
                <i class="fa-solid fa-bars"></i>
            </button>

            <!-- Right Side: User Actions -->
            <div class="header-user-menu">
                <button class="logout-btn" id="logout-btn">Logout</button>
                <div class="profile-dropdown">
                    <div class="user-avatar" id="profile-avatar" aria-label="User profile">S</div>
                    <div class="dropdown-menu" id="profile-dropdown-menu">
                        <a href="#" class="dropdown-item" data-view="profile">
                            <i class="fa-solid fa-user"></i> Profile
                        </a>
                        <a href="#" class="dropdown-item" data-view="badges">
                            <i class="fa-solid fa-award"></i> Badges
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <div class="dashboard-container">
            <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo"><img src="logo pic.png" alt="Mental Health Hub Logo" style="width: 2rem; height: 2rem;"><span class="sidebar-title">Mental Health Hub</span></div>
                <!-- REMOVED user-info div -->
            </div>
            <nav class="nav-menu" id="nav-menu" role="navigation" aria-label="Main navigation"></nav>
            <!-- REMOVED logout-section div -->
        </div>

        <main class="main-content">
            <div id="view-dashboard" class="content-view active"><h2>Dashboard</h2><p>Welcome to the Mental Health Hub! Select an option from the sidebar to access different features and tools.</p></div>
            <div id="view-learning-modules" class="content-view">
                <div class="modules-container">
                    <header class="modules-header">
                        <h1>Learning Modules</h1>
                        <p>Explore our comprehensive collection of interactive learning modules designed to enhance your mental wellness knowledge and skills.</p>
                    </header>
                    
                    <!-- Grid View -->
                    <div id="modules-grid-view">
                        <div id="modules-grid" class="modules-grid"></div>
                    </div>
                    
                    <!-- Detail View -->
                    <div id="module-detail-view" class="hidden">
                        <div id="module-detail" class="module-detail"></div>
                    </div>
                    
                    <!-- Completion Modal -->
                    <div id="completion-modal" class="completion-modal hidden">
                        <div class="modal-content">
                            <div class="icon"><i class="fa-solid fa-trophy"></i></div>
                            <h2>Congratulations!</h2>
                            <p>You've successfully completed this module. Keep up the great work on your mental wellness journey!</p>
                            <button id="close-modal-btn" class="btn-primary">Continue Learning</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="view-self-assessment" class="content-view">
                <div class="assessment-container">
                    <!-- START VIEW -->
                    <div id="start-view" class="card start-view">
                        <div class="icon"><i class="fa-solid fa-clipboard-question"></i></div>
                        <h1>Mental Wellness Check-in</h1>
                        <p>This short, confidential assessment will help you understand your current emotional state. Your results are private and will guide you to helpful resources.</p>
                        <button id="start-btn" class="btn">Start Assessment <i class="fa-solid fa-arrow-right"></i></button>
                    </div>

                    <!-- ASSESSMENT VIEW -->
                    <div id="assessment-view" class="card hidden">
                        <div class="progress-bar">
                            <progress id="progress-bar" max="100" value="0"></progress>
                            <p id="progress-text" class="progress-text">Question 1 of 5</p>
                        </div>
                        <form id="question-form">
                            <fieldset id="question-fieldset" class="question-fieldset"></fieldset>
                            <div class="assessment-nav">
                                <button type="button" id="cancel-btn" class="btn btn-secondary">Cancel</button>
                                <button type="submit" id="next-btn" class="btn">Next <i class="fa-solid fa-arrow-right"></i></button>
                            </div>
                        </form>
                    </div>

                    <!-- RESULTS VIEW -->
                    <div id="results-view" class="card hidden"></div>
                    
                    <!-- ERROR VIEW (for EF1) -->
                    <div id="error-view" class="card hidden">
                        <h1><i class="fa-solid fa-triangle-exclamation"></i> Submission Error</h1>
                        <p>We're sorry, but there was a technical issue while processing your assessment. Your progress has been saved.</p>
                        <p>Please try again in a few moments.</p>
                        <button id="retry-btn" class="btn">Try Again</button>
                    </div>
                </div>
            </div>
            <div id="view-result" class="content-view">
                <!-- Main Dashboard View -->
                <div id="dashboard-view">
                    <header class="page-header">
                        <h1>Your Results & Suggestions</h1>
                        <p>Based on your latest self-assessment completed on Nov 4, 2023.</p>
                    </header>
                    <div class="dashboard-grid">
                        <div class="widget-card">
                            <h2>Your Latest Assessment Result</h2>
                            <div id="result-display" class="result-display"></div>
                            <p id="interpretation" class="interpretation"></p>
                        </div>
                        <div class="widget-card">
                            <h2>Personalized Suggestions</h2>
                            <div class="filter-buttons">
                                <button class="btn filter-btn active" data-filter="all">All</button>
                                <button class="btn filter-btn" data-filter="academic">Academic Stress</button>
                                <button class="btn filter-btn" data-filter="social">Social Anxiety</button>
                            </div>
                            <ul id="suggestions-list"></ul>
                        </div>
                    </div>
                </div>

                <!-- Error View -->
                <div id="error-view" class="hidden">
                    <header class="page-header"><h1>Suggestions</h1></header>
                    <div class="widget-card error-card">
                        <div class="icon"><i class="fa-solid fa-triangle-exclamation"></i></div>
                        <h2>Suggestions Unavailable</h2>
                        <p>We couldn't retrieve personalized suggestions at this time. Here are some general wellness tips:</p>
                        <ul id="generic-tips-list" style="text-align: left; max-width: 400px; margin: 20px auto;"></ul>
                    </div>
                </div>

                <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const AI_ENGINE_AVAILABLE = true;

                    const assessmentResult = { score: 8, maxScore: 15 };
                    const allSuggestions = [
                        { id: 1, text: "Try the 'Coping with Anxiety' learning module.", icon: 'fa-book-open-reader', category: 'academic' },
                        { id: 2, text: "Practice the '5-4-3-2-1' grounding technique. Find 5 things you can see, 4 you can touch...", icon: 'fa-hand-paper', category: 'social' },
                        { id: 3, text: "Set a daily goal to take a 15-minute walk outside.", icon: 'fa-bullseye', category: 'academic' },
                        { id: 4, text: "Join the 'Peer Discussion' forum on exam stress.", icon: 'fa-users', category: 'academic' },
                        { id: 5, text: "Consider booking a session with a counselor to talk things through.", icon: 'fa-calendar-check', category: 'social' },
                        { id: 6, text: "Log your mood daily to better understand your feelings.", icon: 'fa-face-smile', category: 'all' }
                    ];
                    let bookmarkedSuggestions = [3];

                    const dashboardView = document.getElementById('dashboard-view');
                    const errorView = document.getElementById('error-view');
                    const resultDisplay = document.getElementById('result-display');
                    const interpretationText = document.getElementById('interpretation');
                    const filterButtonsContainer = document.querySelector('.filter-buttons');
                    const suggestionsList = document.getElementById('suggestions-list');

                    function renderDashboard() {
                        let level, interpretation;
                        if (assessmentResult.score <= 5) {
                            level = { class: 'low', text: 'Low Stress' };
                            interpretation = "Your result indicates a low level of stress. This is great! Keep up with your current self-care practices.";
                        } else if (assessmentResult.score <= 10) {
                            level = { class: 'moderate', text: 'Moderate Stress' };
                            interpretation = "Your result suggests a moderate stress level. This is common, and there are many helpful resources available here to support you.";
                        } else {
                            level = { class: 'high', text: 'High Stress' };
                            interpretation = "Your result indicates a high level of stress. It's important to be mindful of this. We strongly recommend exploring the resources and support options provided.";
                        }
                        resultDisplay.className = `result-display ${level.class}`;
                        resultDisplay.innerHTML = `<div class="score">${assessmentResult.score}/${assessmentResult.maxScore}</div><div class="level">${level.text}</div>`;
                        interpretationText.textContent = interpretation;
                        
                        renderSuggestions('all');
                    }

                    function renderSuggestions(filter) {
                        suggestionsList.innerHTML = '';
                        const filtered = allSuggestions.filter(s => filter === 'all' || s.category === filter || s.category === 'all');
                        
                        filtered.forEach(sug => {
                            const li = document.createElement('li');
                            li.className = 'suggestion-item';
                            const isBookmarked = bookmarkedSuggestions.includes(sug.id);
                            li.innerHTML = `
                                <i class="fa-solid ${sug.icon} icon"></i>
                                <span class="text">${sug.text}</span>
                                <button class="bookmark-btn ${isBookmarked ? 'bookmarked' : ''}" data-id="${sug.id}" aria-label="Bookmark suggestion">
                                    <i class="fa-solid fa-bookmark"></i>
                                </button>
                            `;
                            suggestionsList.appendChild(li);
                        });
                    }
                    
                    function renderGenericTips() {
                        const tips = ["Take a few deep breaths.", "Drink a glass of water.", "Stretch for 5 minutes.", "Think of one thing you are grateful for."];
                        const listEl = document.getElementById('generic-tips-list');
                        listEl.innerHTML = tips.map(tip => `<li>${tip}</li>`).join('');
                    }

                    filterButtonsContainer.addEventListener('click', (e) => {
                        if (e.target.tagName === 'BUTTON') {
                            document.querySelector('.filter-btn.active').classList.remove('active');
                            e.target.classList.add('active');
                            renderSuggestions(e.target.dataset.filter);
                        }
                    });
                    
                    suggestionsList.addEventListener('click', (e) => {
                        const bookmarkBtn = e.target.closest('.bookmark-btn');
                        if (bookmarkBtn) {
                            const id = parseInt(bookmarkBtn.dataset.id);
                            const index = bookmarkedSuggestions.indexOf(id);
                            if (index > -1) {
                                bookmarkedSuggestions.splice(index, 1);
                                bookmarkBtn.classList.remove('bookmarked');
                            } else {
                                bookmarkedSuggestions.push(id);
                                bookmarkBtn.classList.add('bookmarked');
                            }
                            console.log("Bookmarked IDs:", bookmarkedSuggestions);
                        }
                    });

                    if (AI_ENGINE_AVAILABLE) {
                        dashboardView.classList.remove('hidden');
                        errorView.classList.add('hidden');
                        renderDashboard();
                    } else {
                        dashboardView.classList.add('hidden');
                        errorView.classList.remove('hidden');
                        renderGenericTips();
                    }
                });
                </script>
            </div>
            <div id="view-mood-tracking" class="content-view">
                <div class="mood-container">
                    <header class="mood-header">
                        <h1>Mood & Goal Tracking</h1>
                        <p>Track your daily mood and set wellness goals to support your mental health journey</p>
                    </header>

                    <div class="mood-content">
                        <section id="mood-logging-section" class="mood-section">
                            <form id="mood-form">
                                <h2>How are you feeling today?</h2>
                                <div class="mood-options">
                                    <label class="mood-option">
                                        <input type="radio" name="mood" value="Great" data-emoji="ðŸ¤©">
                                        <div class="mood-card"><span class="emoji">ðŸ¤©</span><span class="label">Great</span></div>
                                    </label>
                                    <label class="mood-option">
                                        <input type="radio" name="mood" value="Good" data-emoji="ðŸ™‚">
                                        <div class="mood-card"><span class="emoji">ðŸ™‚</span><span class="label">Good</span></div>
                                    </label>
                                    <label class="mood-option">
                                        <input type="radio" name="mood" value="Okay" data-emoji="ðŸ˜">
                                        <div class="mood-card"><span class="emoji">ðŸ˜</span><span class="label">Okay</span></div>
                                    </label>
                                    <label class="mood-option">
                                        <input type="radio" name="mood" value="Down" data-emoji="ðŸ˜•">
                                        <div class="mood-card"><span class="emoji">ðŸ˜•</span><span class="label">Down</span></div>
                                    </label>
                                    <label class="mood-option">
                                        <input type="radio" name="mood" value="Bad" data-emoji="ðŸ˜ž">
                                        <div class="mood-card"><span class="emoji">ðŸ˜ž</span><span class="label">Bad</span></div>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label for="mood-note">Add a note (optional)</label>
                                    <textarea id="mood-note" placeholder="What's making you feel this way?"></textarea>
                                </div>
                                <button type="submit" class="btn"><i class="fa-solid fa-pen-to-square"></i> Log Mood</button>
                            </form>
                        </section>
                        
                        <section id="goal-setting-section" class="mood-section">
                            <form id="goal-form">
                                <h2>Set a Daily Goal</h2>
                                <div class="form-group">
                                    <label for="daily-goal">What's your goal for today?</label>
                                    <input type="text" id="daily-goal" placeholder="e.g., Take a 15-minute walk, Practice mindfulness">
                                </div>
                                <button type="submit" class="btn"><i class="fa-solid fa-bullseye"></i> Set Goal</button>
                            </form>
                        </section>
                    </div>

                    <section id="history-section" class="history-section">
                        <h2>Recent Mood History</h2>
                        <div id="message-area"></div>
                        <ul id="mood-history-list">
                            <!-- History will be populated by JavaScript -->
                        </ul>
                    </section>
                </div>
            </div>
            <div id="view-peer-support" class="content-view">
                <div class="peer-container">
                    <div class="peer-header">
                        <h1>Peer Support Forums</h1>
                        <p>Connect with others, share experiences, and find support in our community discussions</p>
                    </div>
                    
                    <div class="topics-view" id="topicsView">
                        <div class="topics-grid" id="topicsGrid">
                            <!-- Topics will be dynamically loaded here -->
                        </div>
                    </div>
                    
                    <div class="discussion-view" id="discussionView">
                        <div class="discussion-header">
                            <button class="back-btn" onclick="showTopicsView()">â† Back to Topics</button>
                            <h2 id="discussionTitle">Discussion</h2>
                        </div>
                        
                        <div class="discussion-thread" id="discussionThread">
                            <!-- Discussion posts will be loaded here -->
                        </div>
                        
                        <div class="reply-form">
                            <textarea class="reply-textarea" id="replyTextarea" placeholder="Share your thoughts or experiences..."></textarea>
                            <div class="reply-actions">
                                <button class="cancel-btn" onclick="clearReply()">Cancel</button>
                                <button class="submit-btn" onclick="submitReply()">Post Reply</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="maintenance-message" id="maintenanceMessage" style="display: none;">
                        <h3>Forums Temporarily Unavailable</h3>
                        <p>Our peer support forums are currently undergoing maintenance. Please check back later.</p>
                    </div>
                </div>
            </div>
            <div id="view-feedback" class="content-view">
                <div class="feedback-container">
                    <header class="feedback-header">
                        <h1>Feedback</h1>
                        <p>We value your input! Please share your thoughts, suggestions, or report any issues.</p>
                    </header>

                    <section class="feedback-form">
                        <form id="feedback-form">
                            <div id="form-messages"></div>
                            
                            <fieldset class="form-fieldset">
                                <legend>Type of Feedback</legend>
                                <div class="feedback-type-options">
                                    <div class="radio-option">
                                        <input type="radio" id="type-suggestion" name="feedback-type" value="suggestion" required>
                                        <label for="type-suggestion">Suggestion</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="type-bug" name="feedback-type" value="bug">
                                        <label for="type-bug">Bug Report</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="type-rating" name="feedback-type" value="rating">
                                        <label for="type-rating">General Comment</label>
                                    </div>
                                </div>
                            </fieldset>
                            
                            <div class="form-group">
                                <label for="feedback-content">Your Feedback</label>
                                <textarea id="feedback-content" placeholder="Please describe your suggestion or issue..." required></textarea>
                            </div>

                            <div class="checkbox-group">
                                <input type="checkbox" id="anonymous-check" name="is-anonymous">
                                <label for="anonymous-check">Submit anonymously</label>
                            </div>

                            <button type="submit" class="btn-submit">
                                <i class="fa-solid fa-paper-plane"></i> Submit
                            </button>
                        </form>
                    </section>
                </div>
            </div>
            <div id="view-progress-tracking" class="content-view">
                <div class="progress-dashboard">
                    <h1>Your Progress Dashboard</h1>
                    <p class="subtitle">Track your mental wellness journey and see your improvements over time</p>
                    
                    <div class="kpi-cards">
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fa-solid fa-calendar-check"></i>
                            </div>
                            <div class="kpi-data">
                                <h3>Check-ins</h3>
                                <p class="kpi-value">28</p>
                                <p class="kpi-trend positive"><i class="fa-solid fa-arrow-up"></i> 4 from last month</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fa-solid fa-brain"></i>
                            </div>
                            <div class="kpi-data">
                                <h3>Avg. Mood</h3>
                                <p class="kpi-value">7.2<span>/10</span></p>
                                <p class="kpi-trend positive"><i class="fa-solid fa-arrow-up"></i> 0.8 from last month</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fa-solid fa-bullseye"></i>
                            </div>
                            <div class="kpi-data">
                                <h3>Goals Completed</h3>
                                <p class="kpi-value">12</p>
                                <p class="kpi-trend positive"><i class="fa-solid fa-arrow-up"></i> 3 from last month</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fa-solid fa-graduation-cap"></i>
                            </div>
                            <div class="kpi-data">
                                <h3>Modules Completed</h3>
                                <p class="kpi-value">5</p>
                                <p class="kpi-trend positive"><i class="fa-solid fa-arrow-up"></i> 2 from last month</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-sections">
                        <div class="progress-section">
                            <h2>Mood Trends</h2>
                            <div class="chart-container">
                                <!-- Static chart for demo purposes -->
                                <div class="static-chart mood-chart">
                                    <div class="chart-y-axis">
                                        <span>10</span>
                                        <span>8</span>
                                        <span>6</span>
                                        <span>4</span>
                                        <span>2</span>
                                        <span>0</span>
                                    </div>
                                    <div class="chart-bars">
                                        <div class="chart-bar" style="height: 60%;"><span>Mon</span></div>
                                        <div class="chart-bar" style="height: 75%;"><span>Tue</span></div>
                                        <div class="chart-bar" style="height: 55%;"><span>Wed</span></div>
                                        <div class="chart-bar" style="height: 80%;"><span>Thu</span></div>
                                        <div class="chart-bar" style="height: 70%;"><span>Fri</span></div>
                                        <div class="chart-bar" style="height: 85%;"><span>Sat</span></div>
                                        <div class="chart-bar" style="height: 90%;"><span>Sun</span></div>
                                    </div>
                                </div>
                            </div>
                            <p class="chart-caption">Your mood has been improving steadily over the past week!</p>
                        </div>
                        
                        <div class="progress-section">
                            <h2>Current Goals</h2>
                            <ul class="goals-list">
                                <li class="goal-item">
                                    <div class="goal-checkbox">
                                        <input type="checkbox" id="goal1" checked>
                                        <label for="goal1"></label>
                                    </div>
                                    <div class="goal-details">
                                        <h3>Practice mindfulness daily</h3>
                                        <p>10 minutes of meditation each morning</p>
                                        <div class="goal-meta">
                                            <span class="goal-date"><i class="fa-solid fa-calendar"></i> Started: Oct 15</span>
                                            <span class="goal-streak"><i class="fa-solid fa-fire"></i> 7 day streak</span>
                                        </div>
                                    </div>
                                </li>
                                
                                <li class="goal-item">
                                    <div class="goal-checkbox">
                                        <input type="checkbox" id="goal2">
                                        <label for="goal2"></label>
                                    </div>
                                    <div class="goal-details">
                                        <h3>Improve sleep schedule</h3>
                                        <p>Go to bed by 11pm on weeknights</p>
                                        <div class="goal-meta">
                                            <span class="goal-date"><i class="fa-solid fa-calendar"></i> Started: Oct 20</span>
                                            <span class="goal-streak"><i class="fa-solid fa-fire"></i> 3 day streak</span>
                                        </div>
                                    </div>
                                </li>
                                
                                <li class="goal-item">
                                    <div class="goal-checkbox">
                                        <input type="checkbox" id="goal3">
                                        <label for="goal3"></label>
                                    </div>
                                    <div class="goal-details">
                                        <h3>Reduce academic stress</h3>
                                        <p>Use time-blocking for study sessions</p>
                                        <div class="goal-meta">
                                            <span class="goal-date"><i class="fa-solid fa-calendar"></i> Started: Oct 22</span>
                                            <span class="goal-streak"><i class="fa-solid fa-fire"></i> 5 day streak</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                            <!-- 'Add New Goal' button removed as requested -->
                        </div>
                    </div>
                    
                    <div class="progress-sections">
                        <div class="progress-section full-width">
                            <h2>Assessment Progress</h2>
                            <div class="assessment-progress-container">
                                <div class="assessment-progress-item">
                                    <div class="assessment-info">
                                        <h3>Anxiety Levels</h3>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar" style="width: 65%;"></div>
                                        </div>
                                        <div class="progress-labels">
                                            <span>High</span>
                                            <span>Moderate</span>
                                            <span>Low</span>
                                        </div>
                                    </div>
                                    <div class="assessment-trend">
                                        <span class="trend-label">Trend:</span>
                                        <span class="trend-value positive"><i class="fa-solid fa-arrow-down"></i> Improving</span>
                                    </div>
                                </div>
                                
                                <div class="assessment-progress-item">
                                    <div class="assessment-info">
                                        <h3>Depression Screening</h3>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar" style="width: 40%;"></div>
                                        </div>
                                        <div class="progress-labels">
                                            <span>High</span>
                                            <span>Moderate</span>
                                            <span>Low</span>
                                        </div>
                                    </div>
                                    <div class="assessment-trend">
                                        <span class="trend-label">Trend:</span>
                                        <span class="trend-value positive"><i class="fa-solid fa-arrow-down"></i> Improving</span>
                                    </div>
                                </div>
                                
                                <div class="assessment-progress-item">
                                    <div class="assessment-info">
                                        <h3>Stress Management</h3>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar" style="width: 75%;"></div>
                                        </div>
                                        <div class="progress-labels">
                                            <span>Poor</span>
                                            <span>Fair</span>
                                            <span>Good</span>
                                        </div>
                                    </div>
                                    <div class="assessment-trend">
                                        <span class="trend-label">Trend:</span>
                                        <span class="trend-value positive"><i class="fa-solid fa-arrow-up"></i> Improving</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-take-assessment">
                                <i class="fa-solid fa-clipboard-check"></i> Take New Assessment
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Add Goal Modal -->
                <div id="add-goal-modal" class="modal">
                    <div class="modal-content">
                        <span class="close-modal">&times;</span>
                        <h2>Add New Goal</h2>
                        <form id="add-goal-form">
                            <div class="form-group">
                                <label for="goal-title">Goal Title</label>
                                <input type="text" id="goal-title" placeholder="Enter a clear, specific goal" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="goal-description">Description</label>
                                <textarea id="goal-description" placeholder="Add details about your goal"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="goal-category">Category</label>
                                <select id="goal-category">
                                    <option value="mindfulness">Mindfulness</option>
                                    <option value="sleep">Sleep</option>
                                    <option value="academic">Academic</option>
                                    <option value="social">Social</option>
                                    <option value="physical">Physical Health</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" class="btn-cancel-modal">Cancel</button>
                                <button type="submit" class="btn-save">Save Goal</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <script>
                    // Modal functionality
                    document.addEventListener('DOMContentLoaded', function() {
                        const modal = document.getElementById('add-goal-modal');
                        const addGoalBtn = document.querySelector('.btn-add-goal');
                        const closeModal = document.querySelector('.close-modal');
                        const cancelBtn = document.querySelector('.btn-cancel-modal');
                        const goalForm = document.getElementById('add-goal-form');
                        
                        // Open modal
                        addGoalBtn.addEventListener('click', function() {
                            modal.style.display = 'flex';
                        });
                        
                        // Close modal
                        closeModal.addEventListener('click', function() {
                            modal.style.display = 'none';
                        });
                        
                        cancelBtn.addEventListener('click', function() {
                            modal.style.display = 'none';
                        });
                        
                        // Close modal when clicking outside
                        window.addEventListener('click', function(event) {
                            if (event.target === modal) {
                                modal.style.display = 'none';
                            }
                        });
                        
                        // Handle form submission
                        goalForm.addEventListener('submit', function(e) {
                            e.preventDefault();
                            
                            // Get form values
                            const title = document.getElementById('goal-title').value;
                            const description = document.getElementById('goal-description').value;
                            const category = document.getElementById('goal-category').value;
                            
                            // Create new goal item (in a real app, this would be saved to a database)
                            const goalsList = document.querySelector('.goals-list');
                            const newGoalId = 'goal' + (goalsList.children.length + 1);
                            
                            const today = new Date();
                            const formattedDate = today.toLocaleString('default', { month: 'short' }) + ' ' + today.getDate();
                            
                            const newGoal = document.createElement('li');
                            newGoal.className = 'goal-item';
                            newGoal.innerHTML = `
                                <div class="goal-checkbox">
                                    <input type="checkbox" id="${newGoalId}">
                                    <label for="${newGoalId}"></label>
                                </div>
                                <div class="goal-details">
                                    <h3>${title}</h3>
                                    <p>${description}</p>
                                    <div class="goal-meta">
                                        <span class="goal-date"><i class="fa-solid fa-calendar"></i> Started: ${formattedDate}</span>
                                        <span class="goal-streak"><i class="fa-solid fa-fire"></i> 1 day streak</span>
                                    </div>
                                </div>
                            `;
                            
                            goalsList.appendChild(newGoal);
                            
                            // Reset form and close modal
                            goalForm.reset();
                            modal.style.display = 'none';
                        });
                    });
                </script>
            </div>
            <div id="view-counseling" class="content-view">
                <div class="booking-container">
                    <div class="booking-form-card">
                        <h1>Book a Counseling Session</h1>
                        <p class="subtitle">Schedule a one-on-one session with our professional counselors</p>
                        
                        <form id="booking-form">
                            <div class="form-group">
                                <label for="counselor">Select Counselor</label>
                                <select id="counselor" required>
                                    <option value="">Choose a counselor</option>
                                    <!-- Will be populated by JavaScript -->
                                </select>
                            </div>
                            
                            <div class="date-time-grid">
                                <div class="form-group">
                                    <label for="session-date">Select Date</label>
                                    <input type="date" id="session-date" required>
                                </div>
                                
                                <div class="form-group">
                                    <label>Select Time Slot</label>
                                    <div id="time-slots" class="time-slots-grid">
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="session-notes">Session Notes (Optional)</label>
                                <textarea id="session-notes" placeholder="Briefly describe what you'd like to discuss..."></textarea>
                            </div>
                            
                            <button type="submit" class="btn-submit">
                                <i class="fa-solid fa-calendar-check"></i> Book Session
                            </button>
                        </form>
                    </div>
                    
                    <h2 class="section-title">Your Bookings</h2>
                    <div id="bookings-list">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                
                <script>
                    // Sample data for counselors
                    const counselors = [
                        { id: 1, name: "Dr. Sarah Johnson", specialization: "Anxiety & Stress Management" },
                        { id: 2, name: "Dr. Michael Chen", specialization: "Depression & Mood Disorders" },
                        { id: 3, name: "Dr. Aisha Patel", specialization: "Academic Pressure & Career Guidance" }
                    ];
                    
                    // Sample data for bookings
                    let bookings = [
                        { id: 1, counselorId: 1, counselorName: "Dr. Sarah Johnson", date: "2023-11-15", time: "10:00 AM", status: "approved", notes: "Initial consultation" },
                        { id: 2, counselorId: 3, counselorName: "Dr. Aisha Patel", date: "2023-11-20", time: "2:30 PM", status: "pending", notes: "Follow-up session" }
                    ];
                    
                    // Available time slots
                    const timeSlots = [
                        "9:00 AM", "10:00 AM", "11:00 AM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM"
                    ];
                    
                    // Function to set minimum date to today
                    function setMinDate() {
                        const today = new Date();
                        const yyyy = today.getFullYear();
                        const mm = String(today.getMonth() + 1).padStart(2, '0');
                        const dd = String(today.getDate()).padStart(2, '0');
                        const formattedDate = `${yyyy}-${mm}-${dd}`;
                        document.getElementById('session-date').min = formattedDate;
                    }
                    
                    // Function to populate counselors dropdown
                    function populateCounselors() {
                        const counselorSelect = document.getElementById('counselor');
                        counselors.forEach(counselor => {
                            const option = document.createElement('option');
                            option.value = counselor.id;
                            option.textContent = `${counselor.name} (${counselor.specialization})`;
                            counselorSelect.appendChild(option);
                        });
                    }
                    
                    // Function to render time slots
                    function renderTimeSlots() {
                        const timeSlotsContainer = document.getElementById('time-slots');
                        timeSlotsContainer.innerHTML = '';
                        
                        const selectedDate = document.getElementById('session-date').value;
                        const selectedCounselorId = parseInt(document.getElementById('counselor').value);
                        
                        timeSlots.forEach(slot => {
                            const button = document.createElement('button');
                            button.type = 'button';
                            button.className = 'time-slot-btn';
                            button.textContent = slot;
                            button.dataset.time = slot;
                            
                            // Check if slot is already booked
                            const isBooked = bookings.some(booking => 
                                booking.date === selectedDate && 
                                booking.time === slot && 
                                booking.counselorId === selectedCounselorId
                            );
                            
                            if (isBooked) {
                                button.disabled = true;
                                button.title = 'Already booked';
                            } else {
                                button.addEventListener('click', selectTimeSlot);
                            }
                            
                            timeSlotsContainer.appendChild(button);
                        });
                    }
                    
                    // Function to handle time slot selection
                    function selectTimeSlot(e) {
                        // Remove selected class from all buttons
                        document.querySelectorAll('.time-slot-btn').forEach(btn => {
                            btn.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked button
                        e.target.classList.add('selected');
                    }
                    
                    // Function to render bookings
                    function renderBookings() {
                        const bookingsList = document.getElementById('bookings-list');
                        bookingsList.innerHTML = '';
                        
                        if (bookings.length === 0) {
                            bookingsList.innerHTML = '<p>You have no upcoming sessions.</p>';
                            return;
                        }
                        
                        bookings.forEach(booking => {
                            const bookingItem = document.createElement('div');
                            bookingItem.className = 'booking-item-card';
                            bookingItem.innerHTML = `
                                <div class="booking-item-details">
                                    <h3>${booking.counselorName}</h3>
                                    <p><i class="fa-solid fa-calendar"></i> ${booking.date} at ${booking.time}</p>
                                    ${booking.notes ? `<p><i class="fa-solid fa-note-sticky"></i> ${booking.notes}</p>` : ''}
                                </div>
                                <div class="booking-item-status">
                                    <span class="status-badge status-${booking.status}">
                                        <i class="fa-solid ${booking.status === 'approved' ? 'fa-check-circle' : 'fa-clock'}"></i>
                                        ${booking.status === 'approved' ? 'Approved' : 'Pending'}
                                    </span>
                                </div>
                                <button class="btn-cancel" data-id="${booking.id}">
                                    <i class="fa-solid fa-times"></i> Cancel
                                </button>
                            `;
                            bookingsList.appendChild(bookingItem);
                        });
                        
                        // Add event listeners to cancel buttons
                        document.querySelectorAll('.btn-cancel').forEach(btn => {
                            btn.addEventListener('click', cancelBooking);
                        });
                    }
                    
                    // Function to handle booking submission
                    function handleBookingSubmit(e) {
                        e.preventDefault();
                        
                        const counselorId = parseInt(document.getElementById('counselor').value);
                        const counselorName = counselors.find(c => c.id === counselorId)?.name;
                        const date = document.getElementById('session-date').value;
                        const selectedTimeBtn = document.querySelector('.time-slot-btn.selected');
                        const notes = document.getElementById('session-notes').value;
                        
                        if (!counselorId || !date || !selectedTimeBtn) {
                            alert('Please fill in all required fields and select a time slot.');
                            return;
                        }
                        
                        const time = selectedTimeBtn.dataset.time;
                        
                        // Create new booking
                        const newBooking = {
                            id: bookings.length + 1,
                            counselorId,
                            counselorName,
                            date,
                            time,
                            status: 'pending',
                            notes
                        };
                        
                        // Add to bookings array
                        bookings.push(newBooking);
                        
                        // Reset form
                        document.getElementById('booking-form').reset();
                        document.querySelectorAll('.time-slot-btn').forEach(btn => {
                            btn.classList.remove('selected');
                        });
                        
                        // Re-render bookings
                        renderBookings();
                        
                        alert('Your booking has been submitted and is pending approval.');
                    }
                    
                    // Function to cancel booking
                    function cancelBooking(e) {
                        const bookingId = parseInt(e.currentTarget.dataset.id);
                        
                        if (confirm('Are you sure you want to cancel this booking?')) {
                            bookings = bookings.filter(booking => booking.id !== bookingId);
                            renderBookings();
                        }
                    }
                    
                    // Event listeners
                    document.addEventListener('DOMContentLoaded', function() {
                        setMinDate();
                        populateCounselors();
                        renderBookings();
                        
                        document.getElementById('booking-form').addEventListener('submit', handleBookingSubmit);
                        document.getElementById('counselor').addEventListener('change', renderTimeSlots);
                        document.getElementById('session-date').addEventListener('change', renderTimeSlots);
                    });
                </script>
            </div>
            <div id="view-ai-chatbot" class="content-view">
                <div class="chat-container">
                    <div class="chat-header">
                        <h1>AI Mental Health Assistant</h1>
                        <p>Get personalized support and guidance from our AI-powered mental health assistant</p>
                        <button class="new-chat-btn" onclick="startNewChat()">New Chat</button>
                    </div>
                    <div class="chat-card">
                        <div class="chat-window" id="chatWindow">
                            <div class="chat-message bot-message">
                                Hello! I'm your AI mental health assistant. I'm here to provide support, coping strategies, and guidance. How are you feeling today?
                            </div>
                        </div>
                        <form class="chat-input-form" onsubmit="sendMessage(event)">
                            <input type="text" id="userInput" placeholder="Type your message here..." required>
                            <button type="submit" class="send-btn">
                                <span>Send</span>
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </form>
                    </div>
                    <div class="error-message" id="chatError" style="display: none;">
                        <h3>Service Temporarily Unavailable</h3>
                        <p>Our AI assistant is currently undergoing maintenance. Please try again later or contact support if you need immediate assistance.</p>
                    </div>
                </div>
            </div>
            <div id="view-profile" class="content-view">
                <div class="profile-container">
                    <header class="page-header">
                        <h1>Edit Profile</h1>
                        <p>Update your personal information</p>
                    </header>

                    <section class="profile-card">
                        <div class="profile-summary">
                            <div class="avatar">S</div>
                            <div class="user-info">
                                <h2>Staff1</h2>
                                <p>staff1@email.com</p>
                                <p><strong>Role:</strong> Student</p>
                            </div>
                        </div>
                        
                        <form id="edit-profile-form">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="first-name">First Name</label>
                                    <input type="text" id="first-name" value="John">
                                </div>
                                <div class="form-group">
                                    <label for="last-name">Last Name</label>
                                    <input type="text" id="last-name" value="Smith">
                                </div>
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" value="john.smith@example.com">
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone</label>
                                    <input type="tel" id="phone" placeholder="Enter your phone number">
                                </div>
                                <div class="form-group form-group-full">
                                    <label for="bio">Bio</label>
                                    <textarea id="bio" placeholder="Tell us about yourself"></textarea>
                                </div>
                            </div>
                            <button type="submit" class="btn-save">
                                <i class="fa-solid fa-save"></i> Save Changes
                            </button>
                            <div id="form-message" style="display: none;"></div>
                        </form>
                    </section>
                </div>
            </div>
            <div id="view-counselling" class="content-view">
                <header class="page-header">
                    <h1>Manage Counseling Sessions</h1>
                    <p>Approve new booking requests and manage your availability.</p>
                </header>

                <div class="dashboard-grid">
                    <section class="widget-card">
                        <h2>Incoming Booking Requests</h2>
                        <ul id="requests-list">
                            <!-- Booking requests will be populated by JavaScript -->
                        </ul>
                    </section>
                    
                    <section class="widget-card">
                        <h2>Manage Your Availability</h2>
                        <p style="font-size: 0.9rem; color: #666; margin-top: -15px; margin-bottom: 20px;">Select the time slots you are available for bookings.</p>
                        <div id="availability-grid" class="availability-grid">
                            <!-- Availability slots will be populated by JavaScript -->
                        </div>
                    </section>
                </div>
            </div>
            <div id="view-intervention-tools" class="content-view"><h2>Intervention Tools</h2><p>Access professional tools for mental health interventions and support.</p></div>
            <div id="view-badges" class="content-view">
                <div class="badges-container">
                    <header class="page-header">
                        <h1>Your Achievement Badges</h1>
                        <p>Earn badges by completing learning modules and participating in peer discussions.</p>
                    </header>

                    <section class="badges-section">
                        <h2>Earned Badges</h2>
                        <div id="earned-badges" class="badges-grid">
                            <!-- Earned badges will be populated by JavaScript -->
                        </div>
                    </section>

                    <section class="badges-section">
                        <h2>Available Badges</h2>
                        <div id="available-badges" class="badges-grid">
                            <!-- Available badges will be populated by JavaScript -->
                        </div>
                    </section>
                </div>
            </div>
            <div id="view-report" class="content-view">
                <header class="page-header">
                    <h1>Engagement & Reports</h1>
                    <p>Monitor comprehensive student engagement with all mental health resources.</p>
                </header>

                <section id="kpi-grid" class="kpi-grid"></section>

                <section class="reports-container">
                    <div class="reports-header">
                        <form id="filter-form" class="filter-controls">
                            <div class="filter-group">
                                <label for="activity-filter">Filter by Activity Type</label>
                                <select id="activity-filter">
                                    <option value="all">All Activities</option>
                                    <option value="Module">Module Engagement</option>
                                    <option value="Assessment">Assessment Taken</option>
                                    <option value="Mood Log">Mood Logged</option>
                                    <option value="Session Booked">Session Booked</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="date-start">Start Date</label>
                                <input type="date" id="date-start">
                            </div>
                            <div class="filter-group">
                                <label for="date-end">End Date</label>
                                <input type="date" id="date-end">
                            </div>
                            <div class="filter-group" style="flex-direction: row; align-items: flex-end; gap: 10px;">
                                <button type="submit" class="btn">Apply Filters</button>
                                <button type="reset" class="btn btn-secondary">Reset</button>
                            </div>
                        </form>
                        <button id="download-btn" class="btn"><i class="fa-solid fa-download"></i> Download Report (CSV)</button>
                    </div>
                    
                    <div id="no-records-message" class="hidden"><p>No records found for the selected filters.</p></div>

                    <div class="table-container">
                        <table id="data-table-container" class="data-table">
                            <thead>
                                <tr>
                                    <th scope="col">Student ID</th>
                                    <th scope="col">Activity Type</th>
                                    <th scope="col">Details</th>
                                    <th scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody id="data-table-body"></tbody>
                        </table>
                    </div>
                </section>
            </div>
            <div id="view-mental-health-resources" class="content-view"><h2>Mental Health Resources for Faculty</h2><p>Access specialized resources and training materials for faculty members.</p></div>
        </main>
        </div>
    </div>

    <script>
        let currentUser = null;
        let currentRole = null;

        const navigationConfig = {
            student: [
                { id: 'dashboard', label: 'Dashboard', icon: 'fa-home' },
                { id: 'learning-modules', label: 'Learning Modules', icon: 'fa-book' },
                { id: 'self-assessment', label: 'Self-Assessment', icon: 'fa-clipboard-check' },
                { id: 'result', label: 'Result & Suggestions', icon: 'fa-lightbulb' },
                { id: 'mood-tracking', label: 'Mood & Goal Tracking', icon: 'fa-smile' },
                { id: 'peer-support', label: 'Peer Support', icon: 'fa-users' },
                { id: 'feedback', label: 'Feedback', icon: 'fa-paper-plane' },
                { id: 'progress-tracking', label: 'Progress Tracking', icon: 'fa-chart-bar' },
                { id: 'ai-chatbot', label: 'AI Assistant', icon: 'fa-robot' },
                { id: 'counseling', label: 'Counseling', icon: 'fa-hands-helping' }
            ],
            professional: [
                { id: 'dashboard', label: 'Dashboard', icon: 'fa-home' },
                { id: 'counselling', label: 'Counselling', icon: 'fa-hands-helping' },
                { id: 'intervention-tools', label: 'Intervention Tools', icon: 'fa-tools' }
            ],
            faculty: [
                { id: 'dashboard', label: 'Dashboard', icon: 'fa-home' },
                { id: 'report', label: 'Report', icon: 'fa-chart-bar' },
                { id: 'mental-health-resources', label: 'Faculty Resources', icon: 'fa-book-medical' }
            ]
        };

        const loginView = document.getElementById('login-view');
        const dashboardView = document.getElementById('dashboard-view');
        const loginForm = document.getElementById('login-form');
        const passwordToggle = document.getElementById('password-toggle');
        const passwordInput = document.getElementById('password');
        const navMenu = document.getElementById('nav-menu');
        const navToggle = document.getElementById('nav-toggle');
        const logoutBtn = document.getElementById('logout-btn');
        const sidebar = document.getElementById('sidebar');

        // Learning Modules Data and Functions
        const modulesData = {
            1: {
                title: "Introduction to Mindfulness",
                description: "Learn the fundamentals of mindfulness and how it can improve your mental well-being.",
                icon: "fa-solid fa-leaf",
                duration: "15 minutes",
                objectives: [
                    "Understand what mindfulness is and its benefits",
                    "Learn basic mindfulness techniques",
                    "Practice simple breathing exercises"
                ],
                quiz: {
                    question: "What is the primary focus of mindfulness practice?",
                    options: [
                        "Thinking about the future",
                        "Being present in the moment",
                        "Analyzing past events",
                        "Planning your day"
                    ],
                    correct: 1
                }
            },
            2: {
                title: "Coping with Anxiety",
                description: "Discover effective strategies for managing anxiety and stress in daily life.",
                icon: "fa-solid fa-heart",
                duration: "20 minutes",
                objectives: [
                    "Identify common anxiety triggers",
                    "Learn grounding techniques",
                    "Develop a personal coping toolkit"
                ],
                quiz: {
                    question: "Which technique is most effective for immediate anxiety relief?",
                    options: [
                        "Deep breathing exercises",
                        "Drinking caffeine",
                        "Avoiding the situation",
                        "Overthinking the problem"
                    ],
                    correct: 0
                }
            },
            3: {
                title: "Building Resilience",
                description: "Strengthen your ability to bounce back from challenges and setbacks.",
                icon: "fa-solid fa-mountain",
                duration: "25 minutes",
                objectives: [
                    "Understand the components of resilience",
                    "Learn to reframe negative thoughts",
                    "Build a support network"
                ],
                quiz: {
                    question: "What is a key component of building resilience?",
                    options: [
                        "Avoiding all challenges",
                        "Developing problem-solving skills",
                        "Isolating yourself",
                        "Ignoring emotions"
                    ],
                    correct: 1
                }
            },
            4: {
                title: "Healthy Sleep Habits",
                description: "Improve your sleep quality for better mental and physical health.",
                icon: "fa-solid fa-moon",
                duration: "18 minutes",
                objectives: [
                    "Understand the importance of sleep for mental health",
                    "Learn sleep hygiene practices",
                    "Create a bedtime routine"
                ],
                quiz: {
                    question: "How many hours of sleep do most adults need per night?",
                    options: [
                        "5-6 hours",
                        "7-9 hours",
                        "10-12 hours",
                        "4-5 hours"
                    ],
                    correct: 1
                }
            }
        };

        // Self-Assessment Data and Functions
        const assessmentQuestions = [
            { text: "Over the last 2 weeks, how often have you been bothered by feeling nervous, anxious, or on edge?", options: [{text: "Not at all", score: 0}, {text: "Several days", score: 1}, {text: "More than half the days", score: 2}, {text: "Nearly every day", score: 3}] },
            { text: "Over the last 2 weeks, how often have you been bothered by not being able to stop or control worrying?", options: [{text: "Not at all", score: 0}, {text: "Several days", score: 1}, {text: "More than half the days", score: 2}, {text: "Nearly every day", score: 3}] },
            { text: "Over the last 2 weeks, how often have you been bothered by having little interest or pleasure in doing things?", options: [{text: "Not at all", score: 0}, {text: "Several days", score: 1}, {text: "More than half the days", score: 2}, {text: "Nearly every day", score: 3}] },
            { text: "Over the last 2 weeks, how often have you been bothered by feeling down, depressed, or hopeless?", options: [{text: "Not at all", score: 0}, {text: "Several days", score: 1}, {text: "More than half the days", score: 2}, {text: "Nearly every day", score: 3}] },
            { text: "Over the last 2 weeks, how often have you been bothered by feeling tired or having little energy?", options: [{text: "Not at all", score: 0}, {text: "Several days", score: 1}, {text: "More than half the days", score: 2}, {text: "Nearly every day", score: 3}] },
        ];
        
        let currentQuestionIndex = 0;
        let userScores = [];
        const SIMULATE_ERROR_ON_SUBMIT = false;

        function showAssessmentView(viewName) {
            const views = ['start-view', 'assessment-view', 'results-view', 'error-view'];
            views.forEach(v => {
                const element = document.getElementById(v);
                if (element) element.classList.add('hidden');
            });
            const targetView = document.getElementById(viewName);
            if (targetView) targetView.classList.remove('hidden');
        }

        function renderAssessmentQuestion() {
            const question = assessmentQuestions[currentQuestionIndex];
            const fieldset = document.getElementById('question-fieldset');
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');
            const nextBtn = document.getElementById('next-btn');
            
            if (!question || !fieldset || !progressText || !progressBar || !nextBtn) return;
            
            let optionsHTML = question.options.map((opt, index) => `
                <label class="answer-label">
                    <input type="radio" name="answer" value="${opt.score}" required>
                    <span>${opt.text}</span>
                </label>
            `).join('');
            
            fieldset.innerHTML = `
                <legend>${question.text}</legend>
                <div class="answer-options">${optionsHTML}</div>
            `;
            
            progressText.textContent = `Question ${currentQuestionIndex + 1} of ${assessmentQuestions.length}`;
            progressBar.value = ((currentQuestionIndex) / assessmentQuestions.length) * 100;
            nextBtn.textContent = (currentQuestionIndex === assessmentQuestions.length - 1) ? 'See Results' : 'Next';
        }

        function calculateAndShowAssessmentResults() {
            if (SIMULATE_ERROR_ON_SUBMIT) {
                showAssessmentView('error-view');
                return;
            }

            const totalScore = userScores.reduce((sum, score) => sum + score, 0);
            let resultCategory, interpretation, tips;

            if (totalScore <= 5) {
                resultCategory = { class: 'low', text: 'Low Stress & Anxiety' };
                interpretation = "Your responses suggest you are currently experiencing a low level of stress and anxiety. This is a great sign of positive mental well-being.";
                tips = ["Continue your current self-care routines.", "Explore new hobbies to maintain balance.", "Practice gratitude journaling."];
            } else if (totalScore <= 10) {
                resultCategory = { class: 'moderate', text: 'Moderate Stress & Anxiety' };
                interpretation = "Your responses suggest you may be experiencing a moderate level of stress and anxiety. It's common to feel this way, and there are many effective strategies to help you manage these feelings.";
                tips = ["Try the 'Introduction to Mindfulness' module.", "Practice deep breathing exercises daily.", "Consider booking a session with a counselor to talk things through."];
            } else {
                resultCategory = { class: 'high', text: 'High Stress & Anxiety' };
                interpretation = "Your responses suggest you may be experiencing a high level of stress and anxiety. It's important to address these feelings. Remember, support is available and you don't have to handle this alone.";
                tips = ["We highly recommend the 'Coping with Anxiety' module.", "Chat with our AI Assistant for immediate coping strategies.", "Booking a session with a professional can provide dedicated support."];
            }
            
            const resultsView = document.getElementById('results-view');
            if (resultsView) {
                resultsView.innerHTML = `
                    <div class="results-header ${resultCategory.class}">
                        <h2>Your Result: ${resultCategory.text}</h2>
                    </div>
                    <div class="results-section">
                        <h3>Interpretation</h3>
                        <p>${interpretation}</p>
                        
                        <h3>Recommended Self-Care Tips</h3>
                        <ul>${tips.map(tip => `<li>${tip}</li>`).join('')}</ul>
                        
                        <h3>Next Steps</h3>
                        <p>Based on your results, you may find these features helpful:</p>
                        <div class="results-actions">
                            <button class="btn"><i class="fa-solid fa-comments"></i> Chat with AI for Support</button>
                            <button class="btn btn-secondary"><i class="fa-solid fa-bullseye"></i> Log Mood & Set Goals</button>
                        </div>
                    </div>
                `;
            }
            console.log('Assessment Result Saved:', { totalScore, category: resultCategory.text });
            showAssessmentView('results-view');
        }

        function resetAssessment() {
            currentQuestionIndex = 0;
            userScores = [];
            showAssessmentView('start-view');
        }

        function setupAssessmentEventListeners() {
            const startBtn = document.getElementById('start-btn');
            const questionForm = document.getElementById('question-form');
            const cancelBtn = document.getElementById('cancel-btn');
            const retryBtn = document.getElementById('retry-btn');
            
            if (startBtn) {
                startBtn.addEventListener('click', () => {
                    showAssessmentView('assessment-view');
                    renderAssessmentQuestion();
                });
            }

            if (questionForm) {
                questionForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const selected = questionForm.querySelector('input[name="answer"]:checked');
                    if (!selected) {
                        alert('Please select an answer.');
                        return;
                    }

                    userScores.push(parseInt(selected.value));
                    
                    if (currentQuestionIndex < assessmentQuestions.length - 1) {
                        currentQuestionIndex++;
                        renderAssessmentQuestion();
                    } else {
                        const progressBar = document.getElementById('progress-bar');
                        if (progressBar) progressBar.value = 100;
                        calculateAndShowAssessmentResults();
                    }
                });
            }
            
            if (cancelBtn) {
                cancelBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to exit? Your progress on this attempt will be lost.')) {
                        resetAssessment();
                    }
                });
            }

            if (retryBtn) {
                retryBtn.addEventListener('click', resetAssessment);
            }
        }

        // AI Chat Functions
        function sendMessage(event) {
            event.preventDefault();
            
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (!message) return;
            
            // Add user message to chat
            addMessageToChat(message, 'user');
            userInput.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const response = generateAIResponse(message);
                addMessageToChat(response, 'bot');
            }, 1000);
        }
        
        function addMessageToChat(message, sender) {
            const chatWindow = document.getElementById('chatWindow');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}-message`;
            messageDiv.textContent = message;
            
            chatWindow.appendChild(messageDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
        
        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('anxious') || lowerMessage.includes('anxiety')) {
                return "I understand you're feeling anxious. Try the 4-7-8 breathing technique: breathe in for 4 counts, hold for 7, exhale for 8. This can help calm your nervous system. Would you like to talk about what's causing your anxiety?";
            } else if (lowerMessage.includes('sad') || lowerMessage.includes('depressed')) {
                return "I'm sorry you're feeling this way. It's important to acknowledge these feelings. Consider reaching out to a trusted friend or family member, or engaging in a small activity you usually enjoy. Remember, it's okay to seek professional help if these feelings persist.";
            } else if (lowerMessage.includes('stress') || lowerMessage.includes('stressed')) {
                return "Stress is a common experience. Try breaking down your tasks into smaller, manageable steps. Take regular breaks, practice deep breathing, and consider physical activity to help manage stress levels. What's the main source of your stress right now?";
            } else if (lowerMessage.includes('sleep') || lowerMessage.includes('insomnia')) {
                return "Good sleep is crucial for mental health. Try establishing a bedtime routine, avoiding screens before bed, and keeping your bedroom cool and dark. If sleep problems persist, consider speaking with a healthcare provider.";
            } else if (lowerMessage.includes('help') || lowerMessage.includes('support')) {
                return "I'm here to help! You can talk to me about your feelings, learn coping strategies, or get information about mental health resources. If you're in crisis, please contact a mental health professional or crisis hotline immediately.";
            } else {
                return "Thank you for sharing that with me. I'm here to listen and support you. Can you tell me more about how you're feeling or what specific support you're looking for today?";
            }
        }
        
        function startNewChat() {
            const chatWindow = document.getElementById('chatWindow');
            chatWindow.innerHTML = '<div class="chat-message bot-message">Hello! I\'m your AI mental health assistant. I\'m here to provide support, coping strategies, and guidance. How are you feeling today?</div>';
        }

        // Peer Support Functions
        const forumTopics = [
            {
                id: 1,
                title: "Anxiety Management Techniques",
                description: "Share and discuss effective strategies for managing anxiety in daily life.",
                posts: 24,
                lastActivity: "2 hours ago"
            },
            {
                id: 2,
                title: "Depression Support Group",
                description: "A safe space to share experiences and support each other through difficult times.",
                posts: 18,
                lastActivity: "4 hours ago"
            },
            {
                id: 3,
                title: "Stress Relief and Relaxation",
                description: "Discuss relaxation techniques, mindfulness practices, and stress management.",
                posts: 31,
                lastActivity: "1 day ago"
            },
            {
                id: 4,
                title: "Sleep and Mental Health",
                description: "Share tips and experiences about improving sleep quality for better mental health.",
                posts: 15,
                lastActivity: "2 days ago"
            }
        ];

        const samplePosts = [
            {
                id: 1,
                author: "Sarah M.",
                time: "3 hours ago",
                content: "I've been struggling with anxiety lately, especially in social situations. Does anyone have tips for managing anxiety when meeting new people?",
                likes: 5,
                replies: 3
            },
            {
                id: 2,
                author: "Mike R.",
                time: "5 hours ago",
                content: "The breathing exercises we discussed last week have been really helpful. I've been practicing the 4-7-8 technique daily and it's made a noticeable difference.",
                likes: 8,
                replies: 2
            }
        ];

        function renderTopics() {
            const grid = document.getElementById('topicsGrid');
            if (!grid) return;
            
            grid.innerHTML = forumTopics.map(topic => `
                <div class="topic-card" onclick="showDiscussion(${topic.id}, '${topic.title}')">
                    <div class="topic-title">${topic.title}</div>
                    <div class="topic-description">${topic.description}</div>
                    <div class="topic-stats">
                        <span>${topic.posts} posts</span>
                        <span>Last activity: ${topic.lastActivity}</span>
                    </div>
                </div>
            `).join('');
        }

        function showDiscussion(topicId, title) {
            document.getElementById('topicsView').style.display = 'none';
            document.getElementById('discussionView').style.display = 'block';
            document.getElementById('discussionTitle').textContent = title;
            
            renderDiscussionPosts();
        }

        function showTopicsView() {
            document.getElementById('discussionView').style.display = 'none';
            document.getElementById('topicsView').style.display = 'block';
        }

        function renderDiscussionPosts() {
            const thread = document.getElementById('discussionThread');
            if (!thread) return;
            
            thread.innerHTML = samplePosts.map(post => `
                <div class="post">
                    <div class="post-header">
                        <span class="post-author">${post.author}</span>
                        <span class="post-time">${post.time}</span>
                    </div>
                    <div class="post-content">${post.content}</div>
                    <div class="post-actions">
                        <button class="post-action" onclick="likePost(${post.id})">
                            <i class="fas fa-heart"></i> ${post.likes}
                        </button>
                        <button class="post-action" onclick="replyToPost(${post.id})">
                            <i class="fas fa-reply"></i> Reply (${post.replies})
                        </button>
                        <button class="post-action" onclick="flagPost(${post.id})">
                            <i class="fas fa-flag"></i> Flag
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function submitReply() {
            const textarea = document.getElementById('replyTextarea');
            const content = textarea.value.trim();
            
            if (!content) {
                alert('Please enter your reply before submitting.');
                return;
            }
            
            // Simulate content moderation
            if (content.toLowerCase().includes('inappropriate')) {
                alert('Your post has been flagged for review by our moderation team.');
                return;
            }
            
            // Add the new post
            const newPost = {
                id: samplePosts.length + 1,
                author: "You",
                time: "Just now",
                content: content,
                likes: 0,
                replies: 0
            };
            
            samplePosts.unshift(newPost);
            renderDiscussionPosts();
            textarea.value = '';
            
            alert('Your reply has been posted successfully!');
        }

        function clearReply() {
            document.getElementById('replyTextarea').value = '';
        }

        function likePost(postId) {
            const post = samplePosts.find(p => p.id === postId);
            if (post) {
                post.likes++;
                renderDiscussionPosts();
            }
        }

        function replyToPost(postId) {
            const textarea = document.getElementById('replyTextarea');
            textarea.focus();
            textarea.placeholder = `Replying to post #${postId}...`;
        }

        function flagPost(postId) {
            if (confirm('Are you sure you want to flag this post for moderator review?')) {
                alert('Post has been flagged and will be reviewed by our moderation team.');
            }
        }

        function setupPeerSupportEventListeners() {
            // Initialize topics when peer support view is accessed
            renderTopics();
        }

        // Feedback Functions
        function displayMessage(type, message) {
            const formMessages = document.getElementById('form-messages');
            formMessages.className = `form-messages ${type}`;
            formMessages.textContent = message;
        }

        function handleFormSubmit(event) {
            event.preventDefault();
            const formMessages = document.getElementById('form-messages');
            const feedbackForm = document.getElementById('feedback-form');
            const feedbackContent = document.getElementById('feedback-content');
            
            formMessages.innerHTML = '';
            formMessages.className = '';

            const feedbackType = feedbackForm.querySelector('input[name="feedback-type"]:checked');
            const feedbackText = feedbackContent.value.trim();

            // Validation
            if (!feedbackType) {
                displayMessage('error', 'Please select a feedback type before submitting.');
                return;
            }
            if (feedbackText === '') {
                displayMessage('error', 'Please provide your feedback before submitting.');
                return;
            }
            
            // Successful submission
            console.log('Feedback Submitted:', {
                type: feedbackType.value,
                content: feedbackText,
                anonymous: document.getElementById('anonymous-check').checked
            });
            
            displayMessage('success', 'Thank you! Your feedback has been submitted successfully.');
            feedbackForm.reset();
        }

        function setupFeedbackEventListeners() {
            const feedbackForm = document.getElementById('feedback-form');
            if (feedbackForm) {
                feedbackForm.addEventListener('submit', handleFormSubmit);
            }
        }

        // Mood & Goal Tracking Functions
        let moodHistory = [];
        
        function renderMoodHistory() {
            const historyList = document.getElementById('mood-history-list');
            if (!historyList) return;
            
            historyList.innerHTML = '';
            if (moodHistory.length === 0) {
                historyList.innerHTML = '<li>No moods logged yet.</li>';
                return;
            }
            
            moodHistory.forEach(entry => {
                const li = document.createElement('li');
                li.className = `history-item history-${entry.mood.toLowerCase()}`;
                
                let noteHTML = entry.note ? `<div class="note">${entry.note}</div>` : '';
                
                li.innerHTML = `
                    <div class="details">
                        <span class="mood-display">
                            <span class="emoji">${entry.emoji}</span>
                            ${entry.mood}
                        </span>
                        <span class="date">${entry.date}</span>
                    </div>
                    ${noteHTML}
                `;
                historyList.appendChild(li);
            });
        }
        
        function showMoodMessage(text) {
            const messageArea = document.getElementById('message-area');
            if (!messageArea) return;
            
            messageArea.textContent = text;
            messageArea.className = 'success';
            setTimeout(() => { 
                messageArea.textContent = '';
                messageArea.className = '';
             }, 3000);
        }

        function setupMoodTrackingEventListeners() {
            const moodForm = document.getElementById('mood-form');
            const goalForm = document.getElementById('goal-form');
            
            if (moodForm) {
                moodForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const selectedMood = moodForm.querySelector('input[name="mood"]:checked');
                    
                    if (!selectedMood) {
                        alert('Please select how you are feeling today.');
                        return;
                    }
                    
                    const newEntry = {
                        mood: selectedMood.value,
                        emoji: selectedMood.dataset.emoji,
                        note: document.getElementById('mood-note').value.trim(),
                        date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
                    };
                    
                    moodHistory.unshift(newEntry);
                    renderMoodHistory();
                    moodForm.reset();
                    showMoodMessage('Mood successfully logged!');
                });
            }
            
            if (goalForm) {
                goalForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const goalText = document.getElementById('daily-goal').value.trim();
                    if (!goalText) {
                        alert('Please enter a goal.');
                        return;
                    }
                    console.log('Daily Goal Set:', goalText);
                    goalForm.reset();
                    showMoodMessage('Daily goal set successfully!');
                });
            }
            
            // Initial render
            renderMoodHistory();
        }

        // Profile Functions
        function setupProfileEventListeners() {
            const profileForm = document.getElementById('profile-form');
            if (profileForm) {
                profileForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = new FormData(profileForm);
                    const profileData = {};
                    
                    for (let [key, value] of formData.entries()) {
                        profileData[key] = value;
                    }
                    
                    console.log('Profile Updated:', profileData);
                    
                    const messageDiv = document.getElementById('profile-message');
                    if (messageDiv) {
                        messageDiv.textContent = 'Profile updated successfully!';
                        messageDiv.className = 'form-message success';
                        setTimeout(() => {
                            messageDiv.textContent = '';
                            messageDiv.className = '';
                        }, 3000);
                    }
                });
            }
        }

        function renderModulesGrid() {
            const grid = document.getElementById('modules-grid');
            if (!grid) return;
            
            grid.innerHTML = '';
            for (const id in modulesData) {
                const module = modulesData[id];
                const card = document.createElement('div');
                card.className = 'module-card';
                card.dataset.moduleId = id;
                card.innerHTML = `
                    <div class="icon"><i class="${module.icon}"></i></div>
                    <h3>${module.title}</h3>
                    <p>${module.description}</p>
                    <div class="duration">${module.duration}</div>
                `;
                grid.appendChild(card);
            }
        }

        function showModuleDetail(moduleId) {
            const module = modulesData[moduleId];
            const detailView = document.getElementById('module-detail-view');
            const gridView = document.getElementById('modules-grid-view');
            const detail = document.getElementById('module-detail');
            
            if (!module || !detailView || !gridView || !detail) return;
            
            detail.innerHTML = `
                <h2>${module.title}</h2>
                <div class="description">${module.description}</div>
                <div class="objectives">
                    <h3>Learning Objectives</h3>
                    <ul>
                        ${module.objectives.map(obj => `<li>${obj}</li>`).join('')}
                    </ul>
                </div>
                <div class="module-actions">
                    <button id="start-module-btn" class="btn-primary" data-module-id="${moduleId}">Start Module</button>
                    <button id="back-to-grid-btn" class="btn-secondary">Back to Modules</button>
                </div>
            `;
            
            gridView.classList.add('hidden');
            detailView.classList.remove('hidden');
        }

        function showQuiz(moduleId) {
            const module = modulesData[moduleId];
            const detail = document.getElementById('module-detail');
            
            if (!module || !detail) return;
            
            detail.innerHTML = `
                <h2>${module.title} - Knowledge Check</h2>
                <div class="quiz-container">
                    <h3>Quick Quiz</h3>
                    <div class="quiz-question">
                        <p>${module.quiz.question}</p>
                        <div class="quiz-options">
                            ${module.quiz.options.map((option, index) => `
                                <div class="quiz-option" data-option="${index}">${option}</div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="module-actions">
                        <button id="submit-quiz-btn" class="btn-primary" data-module-id="${moduleId}" disabled>Submit Answer</button>
                        <button id="back-to-detail-btn" class="btn-secondary" data-module-id="${moduleId}">Back to Module</button>
                    </div>
                </div>
            `;
        }

        function showCompletionModal() {
            const modal = document.getElementById('completion-modal');
            if (modal) {
                modal.classList.remove('hidden');
                
                // Get the current module data
                const moduleId = document.getElementById('submit-quiz-btn')?.dataset.moduleId;
                const moduleData = moduleId && modulesData[moduleId];
                
                if (moduleData) {
                    // Calculate score based on selected answers (simplified for demo)
                    const score = Math.floor(Math.random() * 30) + 70; // Random score between 70-100
                    
                    // Dispatch moduleCompleted event for badge system
                    const moduleCompletedEvent = new CustomEvent('moduleCompleted', {
                        detail: {
                            id: moduleData.id,
                            name: moduleData.title,
                            score: score,
                            completedDate: new Date().toISOString()
                        }
                    });
                    document.dispatchEvent(moduleCompletedEvent);
                }
            }
        }

        function hideCompletionModal() {
            const modal = document.getElementById('completion-modal');
            const detailView = document.getElementById('module-detail-view');
            const gridView = document.getElementById('modules-grid-view');
            
            if (modal) modal.classList.add('hidden');
            if (detailView) detailView.classList.add('hidden');
            if (gridView) gridView.classList.remove('hidden');
        }

        function setupModulesEventListeners() {
            const modulesGrid = document.getElementById('modules-grid');
            const moduleDetail = document.getElementById('module-detail');
            const closeModalBtn = document.getElementById('close-modal-btn');
            
            if (modulesGrid) {
                modulesGrid.addEventListener('click', (e) => {
                    const card = e.target.closest('.module-card');
                    if (card) {
                        showModuleDetail(card.dataset.moduleId);
                    }
                });
            }
            
            if (moduleDetail) {
                moduleDetail.addEventListener('click', (e) => {
                    if (e.target.id === 'back-to-grid-btn') {
                        document.getElementById('module-detail-view').classList.add('hidden');
                        document.getElementById('modules-grid-view').classList.remove('hidden');
                    } else if (e.target.id === 'start-module-btn') {
                        showQuiz(e.target.dataset.moduleId);
                    } else if (e.target.id === 'back-to-detail-btn') {
                        showModuleDetail(e.target.dataset.moduleId);
                    } else if (e.target.id === 'submit-quiz-btn') {
                        showCompletionModal();
                    } else if (e.target.classList.contains('quiz-option')) {
                        document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
                        e.target.classList.add('selected');
                        document.getElementById('submit-quiz-btn').disabled = false;
                    }
                });
            }
            
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', hideCompletionModal);
            }
        }

        function init() {
            setupEventListeners();
            showLoginView();
            handleWindowResize();
            renderModulesGrid();
            setupModulesEventListeners();
            setupAssessmentEventListeners();
            setupPeerSupportEventListeners();
            setupFeedbackEventListeners();
            setupMoodTrackingEventListeners();
            setupProfileEventListeners();
        }

        function handleWindowResize() {
            window.addEventListener('resize', () => {
                if (window.innerWidth > 768) {
                    sidebar.classList.remove('expanded');
                } else {
                    sidebar.classList.remove('collapsed');
                }
            });
        }

        function setupEventListeners() {
            loginForm.addEventListener('submit', handleLogin);
            passwordToggle.addEventListener('click', togglePasswordVisibility);
            navToggle.addEventListener('click', toggleSidebar);
            logoutBtn.addEventListener('click', handleLogout);
            document.addEventListener('keydown', handleKeyboardNavigation);
        }

        function handleLogin(event) {
            event.preventDefault();
            const formData = new FormData(loginForm);
            const email = formData.get('email');
            const role = formData.get('role');
            if (!email || !role) { alert('Please fill in all required fields.'); return; }
            currentUser = email;
            currentRole = role;
            showDashboardView();
        }

        function togglePasswordVisibility() {
            const isPassword = passwordInput.type === 'password';
            passwordInput.type = isPassword ? 'text' : 'password';
            const icon = passwordToggle.querySelector('i');
            icon.className = isPassword ? 'fa-solid fa-eye-slash' : 'fa-solid fa-eye';
            passwordToggle.setAttribute('aria-label', isPassword ? 'Hide password' : 'Show password');
        }

        function toggleSidebar() {
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('expanded');
            } else {
                sidebar.classList.toggle('collapsed');
            }
        }

        function handleLogout() {
            currentUser = null;
            currentRole = null;
            loginForm.reset();
            showLoginView();
        }

        function showLoginView() {
            loginView.classList.remove('hidden');
            dashboardView.classList.remove('active');
            setTimeout(() => { document.getElementById('email').focus(); }, 100);
        }

        function showDashboardView() {
            loginView.classList.add('hidden');
            dashboardView.classList.add('active');
            // REMOVED updateUserInfo() call
            generateNavigation();
            showContent('dashboard');
        }
        
        // REMOVED updateUserInfo() function

        function generateNavigation() {
            const navItems = navigationConfig[currentRole] || [];
            navMenu.innerHTML = '';
            navItems.forEach(item => {
                const navItem = document.createElement('button');
                navItem.className = 'nav-item';
                navItem.setAttribute('data-view', item.id);
                if (item.id === 'dashboard') navItem.classList.add('active');
                navItem.innerHTML = `<i class="fa-solid ${item.icon}" aria-hidden="true"></i> ${item.label}`;
                navItem.addEventListener('click', () => {
                    setActiveNavItem(navItem);
                    showContent(item.id);
                });
                navMenu.appendChild(navItem);
            });
        }

        function setActiveNavItem(activeItem) {
            navMenu.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            activeItem.classList.add('active');
        }

        function showContent(viewId) {
            document.querySelectorAll('.content-view').forEach(view => view.classList.remove('active'));
            const targetView = document.getElementById(`view-${viewId}`);
            if (targetView) {
                targetView.classList.add('active');
                const heading = targetView.querySelector('h2');
                if (heading) heading.focus();
            }
        }

        function handleKeyboardNavigation(event) {
            if (event.key === 'Escape' && dashboardView.classList.contains('active')) handleLogout();
            if (event.key === 'Enter' && event.target.classList.contains('nav-item')) event.target.click();
        }

        // Counselling functionality for professionals
        function setupCounsellingFunctionality() {
            const bookingRequests = [
                { id: 1, studentId: '#2045', date: '2023-11-10', time: '11:00 AM', notes: 'Feeling very anxious about upcoming exams.', status: 'pending' },
                { id: 2, studentId: '#1872', date: '2023-11-10', time: '2:00 PM', notes: '', status: 'approved' },
                { id: 3, studentId: '#3109', date: '2023-11-11', time: '9:00 AM', notes: 'Just need to talk to someone.', status: 'pending' },
            ];
            
            const timeSlots = ['9:00 AM', '10:00 AM', '11:00 AM', '12:00 PM', '1:00 PM', '2:00 PM', '3:00 PM', '4:00 PM'];
            
            const requestsList = document.getElementById('requests-list');
            const availabilityGrid = document.getElementById('availability-grid');

            function renderBookings() {
                if (!requestsList) return;
                
                requestsList.innerHTML = '';
                if (bookingRequests.length === 0) {
                    requestsList.innerHTML = '<li>No pending or upcoming sessions.</li>';
                    return;
                }
                
                bookingRequests.forEach(req => {
                    const li = document.createElement('li');
                    li.className = `request-card ${req.status}`;
                    li.dataset.bookingId = req.id;
                    
                    let actionsHTML = '';
                    if (req.status === 'pending') {
                        actionsHTML = `
                            <button class="btn btn-approve"><i class="fa-solid fa-check"></i> Approve</button>
                            <button class="btn btn-decline"><i class="fa-solid fa-times"></i> Decline</button>
                        `;
                    } else { // Approved
                        actionsHTML = `
                            <button class="btn btn-disabled" disabled><i class="fa-solid fa-check-circle"></i> Approved</button>
                            <button class="btn btn-cancel"><i class="fa-solid fa-calendar-times"></i> Cancel Session</button>
                        `;
                    }
                    
                    li.innerHTML = `
                        <div class="request-header">
                            <div>
                                <h3>Student ID: ${req.studentId}</h3>
                                <span class="date-time">${new Date(req.date).toDateString()}, ${req.time}</span>
                            </div>
                        </div>
                        ${req.notes ? `<p class="request-notes"><strong>Notes:</strong> "${req.notes}"</p>` : ''}
                        <div class="request-actions">${actionsHTML}</div>
                    `;
                    requestsList.appendChild(li);
                });
            }
            
            function renderAvailability() {
                if (!availabilityGrid) return;
                
                availabilityGrid.innerHTML = '';
                timeSlots.forEach(slot => {
                    const slotEl = document.createElement('div');
                    slotEl.className = 'availability-slot';
                    const checkboxId = `slot-${slot.replace(/\s/g, '-')}`;
                    slotEl.innerHTML = `
                        <input type="checkbox" id="${checkboxId}" data-time="${slot}">
                        <label for="${checkboxId}">${slot}</label>
                    `;
                    availabilityGrid.appendChild(slotEl);
                });
            }
            
            if (requestsList) {
                requestsList.addEventListener('click', (e) => {
                    const card = e.target.closest('.request-card');
                    if (!card) return;
                    
                    const bookingId = parseInt(card.dataset.bookingId);

                    if (e.target.closest('.btn-approve')) {
                        const booking = bookingRequests.find(b => b.id === bookingId);
                        if (booking) booking.status = 'approved';
                        renderBookings();
                    }
                    
                    if (e.target.closest('.btn-decline') || e.target.closest('.btn-cancel')) {
                        if (confirm('Are you sure you want to remove this session from your schedule?')) {
                            bookingRequests = bookingRequests.filter(b => b.id !== bookingId);
                            renderBookings();
                        }
                    }
                });
            }
            
            if (availabilityGrid) {
                availabilityGrid.addEventListener('click', (e) => {
                    if (e.target.type === 'checkbox') {
                        console.log(`Availability for ${e.target.dataset.time} set to ${e.target.checked}`);
                    }
                });
            }

            // Initial Render
            renderBookings();
            renderAvailability();
        }
        
        // Report functionality for faculty
        function setupReportFunctionality() {
            const engagementData = [
                { studentId: '#101', type: 'Module', details: { name: 'Introduction to Mindfulness', status: 'Completed' }, onlineTimeMinutes: 25, date: '2023-10-25' },
                { studentId: '#102', type: 'Assessment', details: { name: 'Wellness Check-in', score: 8, total: 15, category: 'Moderate' }, onlineTimeMinutes: 10, date: '2023-10-25' },
                { studentId: '#103', type: 'Module', details: { name: 'Coping with Anxiety', status: 'In Progress' }, onlineTimeMinutes: 15, date: '2023-10-26' },
                { studentId: '#101', type: 'Mood Log', details: { mood: 'Okay', rating: 3 }, onlineTimeMinutes: 5, date: '2023-10-27' },
                { studentId: '#104', type: 'Module', details: { name: 'Building Healthy Habits', status: 'Completed' }, onlineTimeMinutes: 30, date: '2023-11-02' },
                { studentId: '#102', type: 'Session Booked', details: { professional: 'Dr. Smith', status: 'Confirmed' }, onlineTimeMinutes: 5, date: '2023-11-03' },
                { studentId: '#105', type: 'Assessment', details: { name: 'Wellness Check-in', score: 4, total: 15, category: 'Low' }, onlineTimeMinutes: 10, date: '2023-11-04' },
            ];
            
            const kpiGrid = document.getElementById('kpi-grid');
            const tableBody = document.getElementById('data-table-body');
            const filterForm = document.getElementById('filter-form');
            const downloadBtn = document.getElementById('download-btn');
            const noRecordsMessage = document.getElementById('no-records-message');
            const tableContainer = document.getElementById('data-table-container');
            const activityFilter = document.getElementById('activity-filter');

            let currentFilteredData = [...engagementData];

            function renderKPIs(data) {
                if (!kpiGrid) return;
                
                const totalStudents = new Set(data.map(d => d.studentId)).size;
                const assessments = data.filter(d => d.type === 'Assessment');
                const avgScore = assessments.length > 0 ? (assessments.reduce((sum, a) => sum + a.details.score, 0) / assessments.length).toFixed(1) : 'N/A';
                const totalOnlineTime = data.reduce((sum, d) => sum + d.onlineTimeMinutes, 0);
                
                kpiGrid.innerHTML = `
                    <div class="kpi-card"><div class="icon" aria-hidden="true"><i class="fa-solid fa-users"></i></div><div><div class="value">${totalStudents}</div><div class="label">Active Students</div></div></div>
                    <div class="kpi-card"><div class="icon" aria-hidden="true"><i class="fa-solid fa-clipboard-check"></i></div><div><div class="value">${avgScore}</div><div class="label">Avg. Assessment Score</div></div></div>
                    <div class="kpi-card"><div class="icon" aria-hidden="true"><i class="fa-solid fa-list-check"></i></div><div><div class="value">${data.length}</div><div class="label">Total Activities Logged</div></div></div>
                    <div class="kpi-card"><div class="icon" aria-hidden="true"><i class="fa-solid fa-clock"></i></div><div><div class="value">${(totalOnlineTime/60).toFixed(1)}h</div><div class="label">Total Online Time</div></div></div>
                `;
            }
            
            function renderTable(data) {
                if (!tableBody || !tableContainer || !noRecordsMessage) return;
                
                tableBody.innerHTML = '';
                if (data.length === 0) {
                    tableContainer.classList.add('hidden');
                    noRecordsMessage.classList.remove('hidden');
                    return;
                }
                
                tableContainer.classList.remove('hidden');
                noRecordsMessage.classList.add('hidden');

                data.forEach(item => {
                    const row = document.createElement('tr');
                    let detailsHTML = '';
                    
                    // Dynamic details column
                    switch (item.type) {
                        case 'Module':
                            detailsHTML = `<ul class="details-list"><li><strong>Name:</strong> ${item.details.name}</li><li><strong>Status:</strong> ${item.details.status}</li></ul>`;
                            break;
                        case 'Assessment':
                            detailsHTML = `<ul class="details-list"><li><strong>Name:</strong> ${item.details.name}</li><li><strong>Score:</strong> ${item.details.score}/${item.details.total}</li><li><strong>Result:</strong> ${item.details.category}</li></ul>`;
                            break;
                        case 'Mood Log':
                            detailsHTML = `<ul class="details-list"><li><strong>Mood:</strong> ${item.details.mood} (${item.details.rating}/5)</li></ul>`;
                            break;
                        case 'Session Booked':
                            detailsHTML = `<ul class="details-list"><li><strong>With:</strong> ${item.details.professional}</li><li><strong>Status:</strong> ${item.details.status}</li></ul>`;
                            break;
                        default:
                            detailsHTML = 'N/A';
                    }

                    row.innerHTML = `
                        <td>${item.studentId}</td>
                        <td>${item.type}</td>
                        <td>${detailsHTML}</td>
                        <td>${new Date(item.date).toLocaleDateString()}</td>
                    `;
                    tableBody.appendChild(row);
                });
            }
            
            if (filterForm) {
                filterForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const activityType = activityFilter ? activityFilter.value : 'all';
                    const startDate = document.getElementById('date-start') ? document.getElementById('date-start').value : '';
                    const endDate = document.getElementById('date-end') ? document.getElementById('date-end').value : '';

                    currentFilteredData = engagementData.filter(item => {
                        const itemDate = new Date(item.date);
                        const isActivityMatch = activityType === 'all' || item.type === activityType;
                        const isStartDateMatch = !startDate || itemDate >= new Date(startDate);
                        const isEndDateMatch = !endDate || itemDate <= new Date(endDate);
                        return isActivityMatch && isStartDateMatch && isEndDateMatch;
                    });
                    
                    renderTable(currentFilteredData);
                });
                
                filterForm.addEventListener('reset', (e) => {
                    e.preventDefault();
                    filterForm.reset();
                    currentFilteredData = [...engagementData];
                    renderTable(currentFilteredData);
                });
            }
            
            if (downloadBtn) {
                downloadBtn.addEventListener('click', () => {
                    if (currentFilteredData.length === 0) {
                        alert("No data to download. Please adjust your filters.");
                        return;
                    }
                    console.log("--- Generating Comprehensive Report ---");
                    console.log("Data to be included in CSV:", currentFilteredData);
                    console.log("--- Report Generation Complete ---");
                    alert("Report generated successfully! See the browser console for the data.");
                });
            }

            // Initial setup
            renderKPIs(engagementData);
            renderTable(engagementData);
        }
        
        // Add content to faculty resources section
        function setupFacultyResources() {
            const resourcesSection = document.getElementById('view-mental-health-resources');
            if (resourcesSection) {
                resourcesSection.innerHTML = `
                    <header class="page-header">
                        <h1>Faculty Resources</h1>
                        <p>Access specialized resources and training materials to support student mental health.</p>
                    </header>
                    
                    <div class="resources-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div class="resource-card" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <div style="font-size: 2rem; color: var(--primary-color); margin-bottom: 15px;"><i class="fa-solid fa-book"></i></div>
                            <h3 style="font-size: 1.2rem; margin-bottom: 10px;">Mental Health Training</h3>
                            <p style="color: #666; margin-bottom: 15px;">Comprehensive training materials to help faculty identify and respond to student mental health concerns.</p>
                            <a href="#" class="btn" style="display: inline-block;">Access Training</a>
                        </div>
                        
                        <div class="resource-card" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <div style="font-size: 2rem; color: var(--primary-color); margin-bottom: 15px;"><i class="fa-solid fa-file-alt"></i></div>
                            <h3 style="font-size: 1.2rem; margin-bottom: 10px;">Referral Guidelines</h3>
                            <p style="color: #666; margin-bottom: 15px;">Step-by-step guidelines for referring students to appropriate mental health services.</p>
                            <a href="#" class="btn" style="display: inline-block;">View Guidelines</a>
                        </div>
                        
                        <div class="resource-card" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <div style="font-size: 2rem; color: var(--primary-color); margin-bottom: 15px;"><i class="fa-solid fa-video"></i></div>
                            <h3 style="font-size: 1.2rem; margin-bottom: 10px;">Workshop Videos</h3>
                            <p style="color: #666; margin-bottom: 15px;">Recorded workshops on supporting student mental health in academic settings.</p>
                            <a href="#" class="btn" style="display: inline-block;">Watch Videos</a>
                        </div>
                        
                        <div class="resource-card" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                            <div style="font-size: 2rem; color: var(--primary-color); margin-bottom: 15px;"><i class="fa-solid fa-comments"></i></div>
                            <h3 style="font-size: 1.2rem; margin-bottom: 10px;">Communication Templates</h3>
                            <p style="color: #666; margin-bottom: 15px;">Templates for communicating with students about mental health concerns.</p>
                            <a href="#" class="btn" style="display: inline-block;">Download Templates</a>
                        </div>
                    </div>
                    
                    <div class="upcoming-workshops" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); margin-bottom: 30px;">
                        <h2 style="font-size: 1.4rem; margin-bottom: 20px;">Upcoming Faculty Workshops</h2>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h3 style="font-size: 1.1rem; margin: 0;">Supporting Students in Crisis</h3>
                                    <p style="color: #666; margin: 5px 0 0;">Learn how to identify and support students experiencing mental health crises.</p>
                                </div>
                                <div style="text-align: right;">
                                    <p style="font-weight: bold; margin: 0;">Nov 15, 2023</p>
                                    <p style="color: #666; margin: 5px 0 0;">2:00 PM - 4:00 PM</p>
                                </div>
                            </li>
                            <li style="padding: 15px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h3 style="font-size: 1.1rem; margin: 0;">Creating Mentally Healthy Classrooms</h3>
                                    <p style="color: #666; margin: 5px 0 0;">Strategies for fostering a supportive learning environment.</p>
                                </div>
                                <div style="text-align: right;">
                                    <p style="font-weight: bold; margin: 0;">Nov 22, 2023</p>
                                    <p style="color: #666; margin: 5px 0 0;">1:00 PM - 3:00 PM</p>
                                </div>
                            </li>
                            <li style="padding: 15px; display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h3 style="font-size: 1.1rem; margin: 0;">Mental Health First Aid for Faculty</h3>
                                    <p style="color: #666; margin: 5px 0 0;">Certification course for responding to mental health emergencies.</p>
                                </div>
                                <div style="text-align: right;">
                                    <p style="font-weight: bold; margin: 0;">Dec 5, 2023</p>
                                    <p style="color: #666; margin: 5px 0 0;">9:00 AM - 4:00 PM</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                `;
            }
        }
        
        // Setup badges functionality
        function setupBadgesFunctionality() {
            const badgesSection = document.getElementById('view-badges');
            if (!badgesSection) return;
            
            // Define badges data
            const earnedBadges = [
                {
                    id: 'module-master',
                    name: 'Module Master',
                    icon: 'fa-solid fa-graduation-cap',
                    description: 'Completed all learning modules',
                    earnedDate: '2023-10-15'
                },
                {
                    id: 'discussion-starter',
                    name: 'Discussion Starter',
                    icon: 'fa-solid fa-comments',
                    description: 'Started 5 discussions in peer support forums',
                    earnedDate: '2023-09-28'
                },
                {
                    id: 'anxiety-expert',
                    name: 'Anxiety Expert',
                    icon: 'fa-solid fa-brain',
                    description: 'Completed the Managing Anxiety module with a perfect score',
                    earnedDate: '2023-09-10'
                }
            ];
            
            const availableBadges = [
                {
                    id: 'resilience-champion',
                    name: 'Resilience Champion',
                    icon: 'fa-solid fa-shield-alt',
                    description: 'Complete the Building Resilience module with a score of 90% or higher',
                    criteria: 'Score 90%+ on Building Resilience module'
                },
                {
                    id: 'sleep-guru',
                    name: 'Sleep Guru',
                    icon: 'fa-solid fa-moon',
                    description: 'Complete the Healthy Sleep Habits module and track sleep for 7 consecutive days',
                    criteria: 'Complete Sleep module + 7 days tracking'
                },
                {
                    id: 'peer-supporter',
                    name: 'Peer Supporter',
                    icon: 'fa-solid fa-hands-helping',
                    description: 'Respond to 10 posts in the peer support forums',
                    criteria: 'Respond to 10 forum posts'
                },
                {
                    id: 'mindfulness-master',
                    name: 'Mindfulness Master',
                    icon: 'fa-solid fa-om',
                    description: 'Complete all mindfulness exercises in the Stress Management module',
                    criteria: 'Complete all mindfulness exercises'
                },
                {
                    id: 'consistency-king',
                    name: 'Consistency Champion',
                    icon: 'fa-solid fa-calendar-check',
                    description: 'Log into the platform for 14 consecutive days',
                    criteria: '14 consecutive days of login'
                }
            ];
            
            // Render badges
            function renderBadges() {
                const earnedBadgesContainer = badgesSection.querySelector('#earned-badges');
                const availableBadgesContainer = badgesSection.querySelector('#available-badges');
                
                if (earnedBadgesContainer) {
                    if (earnedBadges.length === 0) {
                        earnedBadgesContainer.innerHTML = '<p class="no-badges-message">You haven\'t earned any badges yet. Complete learning modules and participate in discussions to earn badges!</p>';
                    } else {
                        earnedBadgesContainer.innerHTML = earnedBadges.map(badge => `
                            <div class="badge-card earned">
                                <div class="badge-icon"><i class="${badge.icon}"></i></div>
                                <div class="badge-info">
                                    <h3>${badge.name}</h3>
                                    <p>${badge.description}</p>
                                    <p class="earned-date">Earned on ${new Date(badge.earnedDate).toLocaleDateString()}</p>
                                </div>
                            </div>
                        `).join('');
                    }
                }
                
                if (availableBadgesContainer) {
                    availableBadgesContainer.innerHTML = availableBadges.map(badge => `
                        <div class="badge-card available">
                            <div class="badge-icon"><i class="${badge.icon}"></i></div>
                            <div class="badge-info">
                                <h3>${badge.name}</h3>
                                <p>${badge.description}</p>
                                <div class="badge-criteria">
                                    <span>How to earn:</span> ${badge.criteria}
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            }
            
            // Check for new badges when modules are completed
            document.addEventListener('moduleCompleted', function(e) {
                const moduleData = e.detail;
                console.log('Module completed:', moduleData);
                
                // Check if this completion earns any badges
                if (moduleData.name === 'Building Resilience' && moduleData.score >= 90) {
                    awardBadge('resilience-champion');
                }
                
                if (moduleData.name === 'Healthy Sleep Habits') {
                    // This would normally check for 7 days of tracking
                    // For demo purposes, we'll just show a notification
                    showNotification('You\'re on your way to earning the Sleep Guru badge! Track your sleep for 7 days to earn it.');
                }
                
                // Check if all modules are completed for Module Master badge
                const allModulesCompleted = true; // This would normally check the actual data
                if (allModulesCompleted) {
                    awardBadge('module-master');
                }
            });
            
            // Function to award a badge
            function awardBadge(badgeId) {
                const badge = availableBadges.find(b => b.id === badgeId);
                if (!badge) return;
                
                // Check if already earned
                if (earnedBadges.some(b => b.id === badgeId)) return;
                
                // Add to earned badges
                const newBadge = {
                    ...badge,
                    earnedDate: new Date().toISOString().split('T')[0]
                };
                
                earnedBadges.push(newBadge);
                
                // Remove from available badges
                const badgeIndex = availableBadges.findIndex(b => b.id === badgeId);
                if (badgeIndex !== -1) {
                    availableBadges.splice(badgeIndex, 1);
                }
                
                // Update the UI
                renderBadges();
                
                // Show notification
                showNotification(`Congratulations! You've earned the ${badge.name} badge!`);
            }
            
            // Function to show notification
            function showNotification(message) {
                const notification = document.createElement('div');
                notification.className = 'notification badge-notification';
                notification.innerHTML = `
                    <div class="notification-icon"><i class="fa-solid fa-award"></i></div>
                    <div class="notification-content">${message}</div>
                    <button class="notification-close"><i class="fa-solid fa-times"></i></button>
                `;
                
                document.body.appendChild(notification);
                
                // Add animation class after a small delay to trigger animation
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                // Remove notification after 5 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        notification.remove();
                    }, 300); // Wait for fade out animation
                }, 5000);
                
                // Close button functionality
                const closeBtn = notification.querySelector('.notification-close');
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => {
                        notification.classList.remove('show');
                        setTimeout(() => {
                            notification.remove();
                        }, 300);
                    });
                }
            }
            
            // Initialize badges display
            renderBadges();
            
            // For demo purposes: simulate earning a badge after 10 seconds
            setTimeout(() => {
                if (!earnedBadges.some(b => b.id === 'peer-supporter')) {
                    awardBadge('peer-supporter');
                }
            }, 10000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            init();
            
            // Setup profile dropdown toggle
            const profileAvatar = document.getElementById('profile-avatar');
            const profileDropdown = document.getElementById('profile-dropdown-menu');
            
            if (profileAvatar && profileDropdown) {
                profileAvatar.addEventListener('click', function(e) {
                    e.stopPropagation();
                    profileDropdown.classList.toggle('show');
                });
                
                // Close dropdown when clicking elsewhere
                document.addEventListener('click', function() {
                    if (profileDropdown.classList.contains('show')) {
                        profileDropdown.classList.remove('show');
                    }
                });
                
                // Prevent dropdown from closing when clicking inside it
                profileDropdown.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
                
                // Handle profile link click
                const profileLink = profileDropdown.querySelector('[data-view="profile"]');
                if (profileLink) {
                    profileLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        showContent('profile');
                        profileDropdown.classList.remove('show');
                    });
                }
            }
            
            // Initialize role-specific functionality
            setupCounsellingFunctionality();
            setupReportFunctionality();
            setupFacultyResources();
            setupBadgesFunctionality();
            
            // Handle badges link click
            const badgesLink = profileDropdown.querySelector('[data-view="badges"]');
            if (badgesLink) {
                badgesLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    showContent('badges');
                    profileDropdown.classList.remove('show');
                });
            }
        });
    </script>
</body>
</html>


